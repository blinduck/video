(function(){var g={};
(function(window){var k,aa=this;function n(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function p(a,b){function c(){}c.prototype=b.prototype;a.Wb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Tb=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ba(){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=ca)}n("shaka.polyfill.VideoPlaybackQuality.install",ba);function ca(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}};function da(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}});document.addEventListener("webkitfullscreenchange",
ea);document.addEventListener("webkitfullscreenerror",ea);document.addEventListener("mozfullscreenchange",ea);document.addEventListener("mozfullscreenerror",ea);document.addEventListener("MSFullscreenChange",ea);document.addEventListener("MSFullscreenError",ea)}n("shaka.polyfill.Fullscreen.install",da);function ea(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)};function fa(){var a="CustomEvent"in window;if(a)try{new CustomEvent("")}catch(b){a=!1}a||(window.CustomEvent=ga)}n("shaka.polyfill.CustomEvent.install",fa);function ga(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail);return c};function ha(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}ha("error");ha("warn");ha("info");ha("log");ha("debug");function ia(){return Promise.reject(Error("The key system specified is not supported."))}function ja(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function ka(){throw new TypeError("Illegal constructor.");}ka.prototype.createSession=function(){};ka.prototype.setServerCertificate=function(){};function la(){throw new TypeError("Illegal constructor.");}la.prototype.getConfiguration=function(){};la.prototype.createMediaKeys=function(){};function ma(a){oa[a]={ia:pa(),end:NaN}}function qa(a){if(a=oa[a])a.end=pa()}function ra(a){return(a=oa[a])&&a.end?a.end-a.ia:NaN}var pa=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,oa={};function sa(a){this.b=a;this.c=0==ta;this.a=0}var ta=1;function ua(a){return a.a<a.b.byteLength}function va(a){var b=a.b.getUint8(a.a);a.a+=1;return b}function v(a){var b=a.b.getUint32(a.a,a.c);a.a+=4;return b}function wa(a){var b,c;a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.a+=8;return c*Math.pow(2,32)+b}
function xa(a){if(a.a+16>a.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.b.buffer,a.a,16);a.a+=16;return b}function y(a,b){if(a.a+b>a.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.a+=b};function ya(a,b){for(var c={},d=0;d<a.length;++d){var e=b?b(a[d]):a[d].toString();c[e]=a[d]}var d=[],f;for(f in c)d.push(c[f]);return d};function z(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function B(a,b){return b.bind(a)};function za(a){return Object.keys(a).map(function(b){return a[b]})}function Aa(a,b){var c=Ba(a,b,"number");if(null==c)return null;if(isNaN(c)||c==Number.NEGATIVE_INFINITY||c==Number.POSITIVE_INFINITY)throw new RangeError("'"+b+"' must be finite.");if(0>c)throw new RangeError("'"+b+"' must be >= 0");return c}function Ba(a,b,c){a=a[b];if(null==a)return null;if(typeof a!=c)throw new TypeError("'"+b+"' must be a "+c+".");return a}
function Ca(a,b,c){a=a[b];if(null==a)return null;if(!(a instanceof c))throw new TypeError("'"+b+"' must be an instance of "+c.name+".");return a};function Da(a){this.b=a;this.a=new sa(a);Ea||(Ea=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var Ea;
function Fa(a){var b;b=Ga(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=Ga(a);a:{for(d=0;d<Ea.length;d++)if(Ha(c,Ea[d])){d=!0;break a}d=!1}if(d)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d;
c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a;d=new DataView(a.b.buffer,a.b.byteOffset+a.a.a,c);y(a.a,c);return new Ia(b,d)}function Ga(a){var b=va(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=va(a.a);return d}function Ia(a,b){this.id=a;this.a=b}
function Ja(a){if(8<a.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};function C(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)c in b||(b[c]=a[c]);return b}function D(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function Ka(){this.g=new z;this.f=!1;this.a=null;this.b=[];this.c=null}function La(a,b){if(a.f)throw Error("Cannot append to a running task!");a.b.push(b)}Ka.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=!0;this.b.unshift(function(){});Ma(this,void 0)};Ka.prototype.end=function(){this.b.splice(1)};
function Ma(a,b){var c=a.b[0](b),d;c?(d=c[0],a.c=c[1]):(d=Promise.resolve(),a.c=null);d.then(B(a,function(a){this.a?(this.b=[],this.c=null,Na(this)):(this.b.shift(),this.b.length?Ma(this,a):(this.g.resolve(a),this.c=null))})).catch(B(a,function(a){this.b=[];this.c=null;this.a?Na(this):this.g.reject(a)}))}function Na(a){var b=Error("Task aborted.");b.type="aborted";a.g.reject(b);window.setTimeout(function(){this.a.resolve();this.a=null}.bind(a),5)};function G(){this.a={}}G.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};G.prototype.get=function(a){return(a=this.a[a])?a.slice():null};function Oa(a){var b=[],c;for(c in a.a)b.push.apply(b,a.a[c]);return b}function Pa(a,b,c){if(a=a.a[b])for(b=0;b<a.length;++b)a[b]==c&&(a.splice(b,1),--b)}function Qa(a){var b=[],c;for(c in a.a)b.push(c);return b};function Ra(){this.a=new G}Ra.prototype.destroy=function(){Sa(this);this.a=null};function H(a,b,c,d){b=new Ta(b,c,d);a.a.push(c,b)}Ra.prototype.na=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.na(),Pa(this.a,b,e))}};function Sa(a){for(var b=Oa(a.a),c=0;c<b.length;++c)b[c].na();a.a.a={}}function Ta(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}
Ta.prototype.na=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)};function J(a){this.va=new G;this.o=a}n("shaka.util.FakeEventTarget",J);J.prototype.addEventListener=function(a,b,c){c||this.va.push(a,b)};J.prototype.removeEventListener=function(a,b,c){c||Pa(this.va,a,b)};J.prototype.dispatchEvent=function(a){delete a.srcElement;delete a.target;delete a.currentTarget;Object.defineProperties(a,{srcElement:{value:null,writable:!0},target:{value:this,writable:!0},currentTarget:{value:null,writable:!0}});return Ua(this,a)};
function Ua(a,b){b.currentTarget=a;for(var c=a.va.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(f){}}a.o&&b.bubbles&&Ua(a.o,b);return b.defaultPrevented};function Va(a,b,c){Wa(b);Wa(c);return c==b||a>=Xa&&c==b.split("-")[0]||a>=Ya&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Xa=1,Ya=2;function Wa(a){a=a.toLowerCase().split("-");var b=Za[a[0]];b&&(a[0]=b);return a.join("-")}
var Za={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function $a(){return Date.now()+ab}var ab=0;function bb(a){return String.fromCharCode.apply(null,a)}n("shaka.util.Uint8ArrayUtils.toString",bb);function cb(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}n("shaka.util.Uint8ArrayUtils.fromString",cb);function db(a,b){var c=void 0==b?!0:b,d=window.btoa(bb(a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")}n("shaka.util.Uint8ArrayUtils.toBase64",db);function eb(a){return cb(window.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}
n("shaka.util.Uint8ArrayUtils.fromBase64",eb);n("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function fb(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}n("shaka.util.Uint8ArrayUtils.toHex",fb);function Ha(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function gb(a,b){try{var c=new hb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function ib(a){var b=this.mediaKeys;b&&b!=a&&jb(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&jb(a,this);return Promise.resolve()}
function hb(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d=!1,e;e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes},l=!1;if(g.audioCapabilities)for(var m=0;m<g.audioCapabilities.length;++m){var t=g.audioCapabilities[m];t.contentType&&
(l=!0,e.canPlayType(t.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(t),d=!0))}if(g.videoCapabilities)for(m=0;m<g.videoCapabilities.length;++m)t=g.videoCapabilities[m],t.contentType&&(l=!0,e.canPlayType(t.contentType,this.a)&&(h.videoCapabilities.push(t),d=!0));l||(d=e.canPlayType("video/mp4",this.a)||e.canPlayType("video/webm",this.a));"required"==g.persistentState&&(c?h.persistentState="required":d=!1);if(d){this.b=h;return}}throw Error("None of the requested configurations were supported.");
}hb.prototype.createMediaKeys=function(){var a=new kb(this.a);return Promise.resolve(a)};hb.prototype.getConfiguration=function(){return this.b};function kb(a){this.g=a;this.b=null;this.a=new Ra;this.c=[];this.f={}}function jb(a,b){a.b=b;Sa(a.a);b&&(H(a.a,b,"webkitneedkey",a.Gb.bind(a)),H(a.a,b,"webkitkeymessage",a.Fb.bind(a)),H(a.a,b,"webkitkeyadded",a.Db.bind(a)),H(a.a,b,"webkitkeyerror",a.Eb.bind(a)))}k=kb.prototype;
k.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.b||document.createElement("video");a.src||(a.src="about:blank");b=new lb(a,this.g,b);this.c.push(b);return b};k.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};k.Gb=function(a){a=C({type:"encrypted",initDataType:"webm",initData:a.initData});this.b.dispatchEvent(a)};
k.Fb=function(a){var b=mb(this,a.sessionId);b&&(a=C({type:"message",messageType:void 0==b.keyStatuses.a?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))};k.Db=function(a){if(a=mb(this,a.sessionId))nb(a,"usable"),a.a&&a.a.resolve(),a.a=null};
k.Eb=function(a){var b=mb(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode;c.errorCode.systemCode=a.systemCode;!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?nb(b,"output-not-allowed"):1==c?nb(b,"expired"):nb(b,"internal-error"))}};
function mb(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function lb(a,b,c){J.call(this,null);this.f=a;this.h=!1;this.a=this.b=null;this.c=b;this.g=c;this.sessionId="";this.expiration=NaN;this.closed=new z;this.keyStatuses=new ob}p(lb,J);
function pb(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;var d;try{if("persistent-license"==a.g)if(c)d=cb("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=cb("PERSISTENT|"+bb(e))}else d=new Uint8Array(b)}catch(f){return Promise.reject(f)}a.b=new z;try{a.f.webkitGenerateKeyRequest(a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,d)}catch(a){this.b.reject(a),
this.b=null}}.bind(a),10)}return a.b}k=lb.prototype;
k.Ia=function(a,b){if(this.a)this.a.then(this.Ia.bind(this,a,b)).catch(this.Ia.bind(this,a,b));else{this.a=a;var c,d;if("webkit-org.w3.clearkey"==this.c){c=bb(new Uint8Array(b));d=JSON.parse(c);c=d.keys[0].kty;if("A128KW"!=d.keys[0].alg||"oct"!=c)this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null;c=eb(d.keys[0].k);d=eb(d.keys[0].kid)}else c=new Uint8Array(b),d=null;try{this.f.webkitAddKey(this.c,c,d,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}};
function nb(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.a=b;c=C({type:"keystatuseschange"});a.dispatchEvent(c)}k.generateRequest=function(a,b){return pb(this,b,null)};k.load=function(a){return"persistent-license"==this.g?pb(this,null,a):Promise.reject(Error("Not a persistent session."))};k.update=function(a){var b=new z;this.Ia(b,a);return b};
k.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId)}this.closed.resolve();return this.closed};k.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function qb(a){this.b=a;this.a=0}
qb.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:!0}:{value:this.b[this.a++],done:!1}};function ob(){this.size=0;this.a=void 0}var rb;k=ob.prototype;k.entries=function(){var a=rb,b=[];this.a&&b.push([a,this.a]);return new qb(b)};k.forEach=function(a){this.a&&a(this.a)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=rb;return this.a&&Ha(new Uint8Array(a),b)?!0:!1};k.keys=function(){var a=rb,b=[];this.a&&b.push(a);return new qb(b)};
k.values=function(){var a=[];this.a&&a.push(this.a);return new qb(a)};function sb(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(rb=cb("FAKE_KEY_ID"),Navigator.prototype.requestMediaKeySystemAccess=gb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ib,window.MediaKeys=kb,window.MediaKeySystemAccess=hb):(Navigator.prototype.requestMediaKeySystemAccess=ia,delete HTMLMediaElement.prototype.mediaKeys,
HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ja,window.MediaKeys=ka,window.MediaKeySystemAccess=la))}n("shaka.polyfill.MediaKeys.install",sb);n("shaka.polyfill.installAll",function(){fa();da();sb();ba()});function tb(a){this.systemIds=[];this.cencKeyIds=[];a=new sa(new DataView(a.buffer));try{for(;ua(a);){var b=a.a,c=v(a),d=v(a);1==c?c=wa(a):0==c&&(c=a.b.byteLength-b);if(1886614376!=d)y(a,c-(a.a-b));else{var e=va(a);if(1<e)y(a,c-(a.a-b));else{y(a,3);var f=fb(xa(a)),g=[];if(0<e)for(var h=v(a),l=0;l<h;++l){var m=fb(xa(a));g.push(m)}var t=v(a);y(a,t);this.cencKeyIds.push.apply(this.cencKeyIds,g);this.systemIds.push(f);a.a!=b+c&&y(a,c-(a.a-b))}}}}catch(r){}};function ub(a){this.c=Math.exp(Math.log(.5)/a);this.a=this.b=0}ub.prototype.sample=function(a,b){var c=Math.pow(this.c,a);this.b=b*(1-c)+c*this.b;this.a+=a};function vb(a){return a.b/(1-Math.pow(a.c,a.a))};function wb(){J.call(this,null);this.a=new ub(3);this.c=new ub(10);this.b=0}p(wb,J);n("shaka.util.EWMABandwidthEstimator",wb);wb.prototype.sample=function(a,b){if(!(65536>b)){a=Math.max(a,50);var c=8E3*b/a,d=a/1E3;this.a.sample(d,c);this.c.sample(d,c);this.dispatchEvent(C({type:"bandwidth"}));this.b=Date.now()}};wb.prototype.getBandwidth=function(){return.5>this.a.a?5E5:Math.min(vb(this.a),vb(this.c))};wb.prototype.getDataAge=function(){return(Date.now()-this.b)/1E3};
wb.prototype.supportsCaching=function(){return!1};function xb(a,b,c,d){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.active=!1}function yb(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}n("shaka.player.VideoTrack.compare",yb);function zb(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}n("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function Ab(a,b,c){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.active=!1}n("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function K(){this.fontSize="100%";this.fontColor=Bb;this.fontOpacity=Cb;this.backgroundColor=Db;this.backgroundOpacity=Cb;this.fontEdge=Eb}n("shaka.player.TextStyle",K);K.prototype.a=function(){var a=window.localStorage.getItem("ShakaPlayerTextStyle");if(a){var b;try{b=JSON.parse(a)}catch(c){return}if(b&&"object"==typeof b){var a=b,d;for(d in a)d in this&&(this[d]=a[d])}}};K.prototype.load=K.prototype.a;K.prototype.b=function(){window.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this))};
K.prototype.store=K.prototype.b;function Fb(a){var b=[];b.push("font-size: "+a.fontSize);b.push("color: "+Gb(a.fontColor,a.fontOpacity));b.push("background-color: "+Gb(a.backgroundColor,a.backgroundOpacity));for(var c=[],d=0;d<a.fontEdge.length;++d){var e=a.fontEdge[d].slice(3,6);c.push(Gb(a.fontEdge[d].slice(0,3),a.fontOpacity)+" "+e.join("px ")+"px")}b.push("text-shadow: "+c.join(","));return b.join("; ")}function Gb(a,b){return"rgba("+a.concat(b).join(",")+")"}var Bb=[255,255,255],Db=[0,0,0];
K.StandardColors={WHITE:Bb,BLACK:Db,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var Cb=1;K.StandardOpacities={OPAQUE:Cb,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var Eb=[];
K.EdgeStyles={NONE:Eb,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function Hb(a,b,c,d,e,f,g,h,l,m,t){this.b=a;this.o=b;this.u=c;this.a=[];this.c=e||null;this.f=f||null;this.i=g==Ib;this.m=h==Jb;this.h=l||"";this.v=m||"";this.g=t||null;d&&this.a.push(d)}n("shaka.player.DrmSchemeInfo",Hb);var Ib=1;Hb.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:Ib};var Jb=1;Hb.PersistentState={OPTIONAL:0,REQUIRED:Jb};function Kb(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null}
Kb.prototype.clone=function(){var a=new Kb;a.maxHeight=this.maxHeight;a.maxWidth=this.maxWidth;a.maxBandwidth=this.maxBandwidth;a.minBandwidth=this.minBandwidth;return a};function Lb(){return new Hb("","",!1,null)}Hb.createUnencrypted=Lb;function Mb(a,b){a.a=ya(a.a.concat(b.a),function(a){return Array.prototype.join.apply(a.initData)})}Hb.combine=Mb;Hb.prototype.key=function(){return JSON.stringify(this)};var Nb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function L(a){var b;a instanceof L?(Ob(this,a.O),this.W=a.W,this.N=a.N,Pb(this,a.ca),this.J=a.J,Qb(this,a.a.clone()),this.U=a.U):a&&(b=String(a).match(Nb))?(Ob(this,b[1]||"",!0),this.W=Rb(b[2]||""),this.N=Rb(b[3]||"",!0),Pb(this,b[4]),this.J=Rb(b[5]||"",!0),Qb(this,b[6]||"",!0),this.U=Rb(b[7]||"")):this.a=new Sb(null)}k=L.prototype;k.O="";k.W="";k.N="";k.ca=null;k.J="";k.U="";
k.toString=function(){var a=[],b=this.O;b&&a.push(Tb(b,Ub,!0),":");if(b=this.N){a.push("//");var c=this.W;c&&a.push(Tb(c,Ub,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.ca;null!=b&&a.push(":",String(b))}if(b=this.J)this.N&&"/"!=b.charAt(0)&&a.push("/"),a.push(Tb(b,"/"==b.charAt(0)?Vb:Wb,!0));(b=this.a.toString())&&a.push("?",b);(b=this.U)&&a.push("#",Tb(b,Xb));return a.join("")};
k.resolve=function(a){var b=this.clone(),c=!!a.O;c?Ob(b,a.O):c=!!a.W;c?b.W=a.W:c=!!a.N;c?b.N=a.N:c=null!=a.ca;var d=a.J;if(c)Pb(b,a.ca);else if(c=!!a.J){if("/"!=d.charAt(0))if(this.N&&!this.J)d="/"+d;else{var e=b.J.lastIndexOf("/");-1!=e&&(d=b.J.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&
f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.J=d:c=""!==a.a.toString();c?Qb(b,a.a.clone()):c=!!a.U;c&&(b.U=a.U);return b};k.clone=function(){return new L(this)};function Ob(a,b,c){a.O=c?Rb(b,!0):b;a.O&&(a.O=a.O.replace(/:$/,""))}function Pb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.ca=b}else a.ca=null}function Qb(a,b,c){b instanceof Sb?a.a=b:(c||(b=Tb(b,Yb)),a.a=new Sb(b))}
function Rb(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Tb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Zb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Zb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ub=/[#\/\?@]/g,Wb=/[\#\?:]/g,Vb=/[\#\?]/g,Yb=/[\#\?@]/g,Xb=/#/g;function Sb(a){this.b=a||null}Sb.prototype.a=null;Sb.prototype.c=null;
function $b(a,b,c){if(!a.a&&(a.a={},a.c=0,a.b))for(var d=a.b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];g=decodeURIComponent(g.replace(/\+/g," "));h=h||"";$b(a,g,decodeURIComponent(h.replace(/\+/g," ")))}a.b=null;(d=a.a.hasOwnProperty(b)&&a.a[b])||(a.a[b]=d=[]);d.push(c);a.c++}
Sb.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.b=a.join("&")};Sb.prototype.clone=function(){var a=new Sb;a.b=this.b;if(this.a){var b={},c;for(c in this.a)b[c]=this.a[c].concat();a.a=b;a.c=this.c}return a};function ac(a,b,c,d,e){this.b=a;this.a=b;this.c=c;this.f=d;this.url=e}function bc(a,b,c){return new ac(b,c,a.c,a.f,a.url)}function cc(a,b){for(var c=a.length-1;0<=c;--c){var d=a[c];if(b>=d.b&&(null==d.a||b<d.a))return c}return-1}function dc(a,b){return a.map(function(a){return bc(a,a.b+b,null!=a.a?a.a+b:null)})};function ec(){}
ec.prototype.parse=function(a,b,c){var d=null;try{a:{var e=[],f=new sa(a),g=v(f);if(1936286840!=v(f))d=null;else{1==g&&(g=wa(f));var h=va(f);y(f,3);y(f,4);var l=v(f);if(0==l)d=null;else{var m,t;0==h?(m=v(f),t=v(f)):(m=wa(f),t=wa(f));y(f,2);var r=f.b.getUint16(f.a,f.c);f.a+=2;a=m;b=b+g+t;for(g=0;g<r;g++){var A=v(f);t=(A&2147483648)>>>31;var h=A&2147483647,w=v(f);v(f);if(1==t){d=null;break a}e.push(new ac(a/l,(a+w)/l,b,b+h-1,c));a+=w;b+=h}d=e}}}}catch(q){if(!(q instanceof RangeError))throw q;}return d};function M(a){this.s=a;this.K=0}M.prototype.destroy=function(){this.s=null};k=M.prototype;k.length=function(){return this.s.length};function N(a){if(0==a.s.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return a.s[0]}function O(a){if(0==a.s.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return a.s[a.s.length-1]}k.get=function(a){if(0>a||a>=this.s.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.s[a]};
k.fa=function(a){a=cc(this.s,a);return 0<=a?this.s[a]:null};k.za=function(a){fc(this,a);return!0};
function fc(a,b){a.K!=b.K&&(b=new M(dc(b.s,a.K-b.K)));if(0==a.length())a.s=b.s.slice(0);else if(0!=b.length()&&null!=O(a).a&&!(null!=O(b).a&&O(b).a<O(a).a)){if(O(a).a<=N(b).b)var c=bc(O(a),O(a).b,N(b).b),c=a.s.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.s.length&&!(a.s[d].a>=N(b).b);++d);a.s[d].b<N(b).b?(c=bc(a.s[d],a.s[d].b,N(b).b),c=a.s.slice(0,d).concat([c])):(N(a).b>N(b).b||N(b),c=a.s.slice(0,d))}a.s=c.concat(b.s)}}
k.ea=function(a){var b=a-this.K;if(0==b)return 0;this.s=dc(this.s,b);this.K=a;return b};k.ya=function(){return 0<this.length()?{start:N(this).b,end:O(this).a}:{start:0,end:0}};function gc(a){this.b=a;this.a=null}gc.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)};gc.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=new ac(0,null,0,null,this.b);this.a=new M([a]);return Promise.resolve(this.a)};function hc(){}
hc.prototype.parse=function(a,b,c){var d=null;try{var e;var f=new Da(b);if(440786851!=Fa(f).id)e=null;else{var g=Fa(f);if(408125543!=g.id)e=null;else{var h=g.a.byteOffset,l;var m=new Da(g.a);for(b=null;ua(m.a);){var t=Fa(m);if(357149030==t.id){b=t;break}}if(b){for(var r=new Da(b.a),m=1E6;ua(r.a);){var A=Fa(r);if(2807729==A.id){m=Ja(A);break}}l=m/1E9}else l=null;e=l?{Jb:h,Pb:l}:null}}if(e){var w=Fa(new Da(a));if(475249515!=w.id)d=null;else{var q=e.Jb,F=e.Pb;a=[];var E=new Da(w.a);for(e=w=-1;ua(E.a);){var u=
Fa(E);if(187==u.id){var x;var I=new Da(u.a),na=Fa(I);if(179!=na.id)x=null;else{var ze=Ja(na),pd=Fa(I);if(183!=pd.id)x=null;else{for(var qd=new Da(pd.a),h=0;ua(qd.a);){var rd=Fa(qd);if(241==rd.id){h=Ja(rd);break}}x={Rb:ze,Hb:h}}}if(x){var sd=F*x.Rb,td=q+x.Hb;0<=w&&a.push(new ac(w,sd,e,td-1,c));w=sd;e=td}}}0<=w&&a.push(new ac(w,null,e,null,c));d=a}}else d=null}catch(ud){if(!(ud instanceof RangeError))throw ud;}return d};function ic(a){this.url=a;this.a=new jc;this.g=this.i=this.h=0;this.b=null;this.c=new z;this.f=null}function jc(){this.body=null;this.a=1;this.g=1E3;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.i=this.h=!1}function kc(a){lc(a);a.a.body=null;a.c=null;a.f=null}function lc(a){a.b&&(a.b.onload=null,a.b.onreadystatechange=null,a.b.onerror=null,a.b.ontimeout=null);a.b=null}k=ic.prototype;
k.sa=function(){if(this.b)return this.c;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b.replace(/-/g,"+").replace(/_/g,"/")):window.decodeURIComponent(b);"arraybuffer"==this.a.f&&(b=cb(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.c;b.resolve(a);kc(this);return b}if(0==this.url.lastIndexOf("idb:",0))return mc(this);this.h++;this.i=Date.now();this.g||
(this.g=this.a.g);this.b=new XMLHttpRequest;a=this.url;this.f&&!this.f.supportsCaching()&&(a=new L(a),$b(a.a,"_",Date.now()),a=a.toString());this.b.open(this.a.method,a,!0);this.b.responseType=this.a.f;this.b.timeout=this.a.c;this.b.withCredentials=this.a.h;this.b.onload=this.qb.bind(this);this.a.i&&(this.b.onreadystatechange=this.ub.bind(this));this.b.onerror=this.Nb.bind(this);this.b.ontimeout=this.zb.bind(this);for(b in this.a.b)this.b.setRequestHeader(b,this.a.b[b]);this.b.send(this.a.body);return this.c};
function mc(a){var b=a.url.split("/"),c=parseInt(b[2],10),d=parseInt(b[3],10),e=new nc(null,null);return oc(e).then(function(){return pc(e,c,d)}).then(B(a,function(a){var b=JSON.parse(JSON.stringify(new XMLHttpRequest));b.response=a;a=this.c;a.resolve(b);P(e);kc(this);return a})).catch(B(a,function(a){P(e);kc(this);return Promise.reject(a)}))}function qc(a,b,c){b=Error(b);b.type=c;b.status=a.b.status;b.url=a.url;b.method=a.a.method;b.body=a.a.body;b.Sb=a.b;return b}
k.ab=function(){if(this.b&&this.b.readyState!=XMLHttpRequest.DONE){this.b.abort();var a=qc(this,"Request aborted.","aborted");this.c.reject(a);kc(this)}};k.qb=function(a){this.f&&this.f.sample(Date.now()-this.i,a.loaded);200<=this.b.status&&299>=this.b.status?(this.c.resolve(this.b),kc(this)):this.h<this.a.a?rc(this):(a=qc(this,"HTTP error.","net"),this.c.reject(a),kc(this))};
k.ub=function(){if(this.b.readyState==XMLHttpRequest.HEADERS_RECEIVED){var a=Date.parse(this.b.getResponseHeader("Date"));a&&(ab=a-Date.now())}};k.Nb=function(){var a=qc(this,"Network failure.","net");this.c.reject(a);kc(this)};k.zb=function(){if(this.h<this.a.a)rc(this);else{var a=qc(this,"Request timed out.","net");this.c.reject(a);kc(this)}};function rc(a){lc(a);window.setTimeout(a.sa.bind(a),a.g*(1+.5*(2*Math.random()-1)));a.g*=2};function sc(a,b,c,d,e,f){ic.call(this,a);if(b||c)this.a.b.Range="bytes="+(b+"-"+(null!=c?c:""));d&&(this.a.a=d);e&&(this.a.g=e);this.a.c=1E3*(null!=f?f:0)}p(sc,ic);function tc(a){return a.sa().then(B(a,function(a){return Promise.resolve(a.response)}))};function uc(a,b,c){this.i=a;this.c=b;this.o=c;this.h=new Ra;this.b=[];this.u=0;this.f=this.a=null;this.m=0;H(this.h,this.c,"updateend",this.v.bind(this))}var vc=1/60;uc.prototype.destroy=function(){wc(this);this.b=this.a=this.f=null;this.h.destroy();this.i=this.c=this.h=null};function xc(a,b){for(var c=a.c.buffered,d=0;d<c.length;++d){var e=c.start(d)-vc,f=c.end(d)+vc;if(b>=e&&b<=f)return c.end(d)-b}return 0}
function yc(a,b,c){if(a.a)return a=Error("Cannot fetch: previous operation not complete."),a.type="stream",Promise.reject(a);a.a=new Ka;c&&La(a.a,function(){return[zc(this,c),this.g.bind(this)]}.bind(a));La(a.a,function(){var a=new sc(b.url.toString(),b.c,b.f,3,1E3*(b.a?b.a-b.b:1),this.m);a.f=this.o;return[tc(a),a.ab.bind(a)]}.bind(a));La(a.a,B(a,function(a){this.o.getBandwidth();return[zc(this,a),this.g.bind(this)]}));var d=0==a.c.buffered.length&&0==a.b.length,e=null;La(a.a,function(){if(d){var a=
b.b;e=this.c.buffered.start(0)-a}a=cc(this.b,b.b);0<=a?this.b.splice(a+1,0,b):this.b.push(b)}.bind(a));return Ac(a).then(function(){return Promise.resolve(e)}.bind(a))}
function Bc(a){if(a.a)return a=Error("Cannot clear: previous operation not complete."),a.type="stream",Promise.reject(a);a.a=new Ka;La(a.a,function(){var a;a:if(0==this.c.buffered.length)a=Promise.resolve();else{try{this.c.remove(0,Number.POSITIVE_INFINITY)}catch(c){a=Promise.reject(c);break a}this.b=[];a=this.f=new z}return[a,this.g.bind(this)]}.bind(a));return Ac(a)}function wc(a){a.a?(a=a.a,a.a?a=a.a:a.f?(a.c&&a.c(),a.a=new z,a=a.a):(a.f=!0,a=Promise.resolve())):a=Promise.resolve();return a}
function Ac(a){a.a.start();return a.a.g.then(B(a,function(){this.a=null})).catch(B(a,function(a){this.a=null;return Promise.reject(a)}))}function zc(a,b){try{a.c.appendBuffer(b)}catch(c){return Promise.reject(c)}a.f=new z;return a.f}uc.prototype.g=function(){"open"==this.i.readyState&&this.c.abort()};uc.prototype.v=function(){this.f.resolve();this.f=null};function Cc(a,b,c){this.url=a;this.c=b;this.f=c;this.b=this.a=null}function Dc(a){if(a.b)return a.b;a.a=new sc(a.url.toString(),a.c,a.f);var b=tc(a.a).then(B(a,function(a){this.a=null;return Promise.resolve(a)})),b=b.catch(B(a,function(a){this.b=this.a=null;return Promise.reject(a)}));a.b=b;return a.b}function Ec(a){a.a&&(a.a.ab(),a.a=null,a.b=null)};function Fc(a){this.a=a}Fc.prototype.destroy=function(){this.a&&(Ec(this.a),this.a=null)};Fc.prototype.create=function(){return this.a?Dc(this.a):Promise.resolve(null)};function Gc(){this.C=Hc++;this.id=this.A=this.F=null;this.c=0;this.height=this.width=this.bandwidth=null;this.b=this.a="";this.enabled=!0}var Hc=0;Gc.prototype.destroy=function(){this.F&&(this.F.destroy(),this.F=null);this.A&&(this.A.destroy(),this.A=null)};function Ic(a){var b=a.a||"";a.b&&(b+='; codecs="'+a.b+'"');return b}function Jc(){this.C=Kc++;this.id=null;this.contentType=this.lang="";this.b=!1;this.l=[];this.a=[]}var Kc=0;
Jc.prototype.destroy=function(){for(var a=0;a<this.l.length;++a)this.l[a].destroy();this.a=this.l=null};function Lc(a){for(var b=[],c=0;c<a.a.length;++c){var d=new Mc;d.id=a.C;d.a=a.a[c];d.contentType=a.contentType;d.b=a.l.length?Ic(a.l[0]):"";b.push(d)}return b}function Nc(){this.id=null;this.start=0;this.b=null;this.a=[]}Nc.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function Oc(){this.c=!1;this.g=this.f=null;this.b=0;this.a=[]}
Oc.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function Mc(){this.id=0;this.a=null;this.b=this.contentType=""};function Pc(a,b){J.call(this,a);this.b=b;this.g=!0;this.a=this.c=this.f=null}p(Pc,J);Pc.prototype.B=function(){};Pc.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.o=this.b=this.f=this.c=this.a=null};k=Pc.prototype;k.ja=function(){return this.f};k.Oa=function(){return this.c};k.Qa=function(){return!0};k.Pa=function(){return!0};
k.ma=function(a){a.F.create().then(B(this,function(b){if(this.b){this.f=a;this.c=b;if(0==b.length())return Promise.reject(Error("No subtitles URL available."));b=N(b).url.toString();var c=this.xa();this.a&&(this.ta(!1),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=b;this.ta(c)}}))};k.Ua=function(){};k.ta=function(a){this.g=a;this.a&&(this.a.track.mode=a?"showing":"disabled")};k.xa=function(){return this.g};function Qc(a,b,c,d,e){J.call(this,a);this.f=b;this.a=new uc(c,d,e);this.v=this.D=this.b=null;this.H=0;this.G=!1;this.i=null;this.g=!1;this.c=null;this.m=this.h=!1;this.u=15;this.w=!1}p(Qc,J);Qc.prototype.B=function(a){null!=a.streamBufferSize&&(this.u=Number(a.streamBufferSize));null!=a.rangeRequestTimeout&&(this.a.m=Number(a.rangeRequestTimeout))};Qc.prototype.destroy=function(){Rc(this);this.b=null;this.a.destroy();this.o=this.f=this.a=null};k=Qc.prototype;k.ja=function(){return this.b};k.Oa=function(){return this.D};
k.Qa=function(){return this.h};k.Pa=function(){return this.m};k.ma=function(a,b,c){if(a!=this.b){var d=[a.F.create(),a.A.create()];Promise.all(d).then(B(this,function(d){var f=this.b;this.b=a;this.D=d[0];this.v=d[1];this.H=b;this.G=!0;this.g||(f?c&&Sc(this,!0):Tc(this,0))})).catch(B(this,function(a){"aborted"!=a.type&&(a=D(a),this.dispatchEvent(a))}))}};k.Ua=function(){return Sc(this,!1)};
function Sc(a,b){a.b&&!a.g&&(a.g=!0,Rc(a),wc(a.a).then(B(a,function(){var a=this.f.currentTime;if(!b&&0<xc(this.a,a)&&0<=cc(this.a.b,a))return Promise.resolve();this.w=!0;return Bc(this.a)})).then(B(a,function(){this.g=!1;Tc(this,0)})).catch(B(a,function(a){this.g=!1;a=D(a);this.dispatchEvent(a)})))}k.ta=function(){};k.xa=function(){return!0};
k.Cb=function(){var a;a=1<this.a.c.buffered.length?!0:!1;if(a&&this.h)Sc(this,!0);else{this.i=null;a=this.b;var b=this.D,c=this.f.currentTime,d=xc(this.a,c),e=this.h?this.u:Math.min(this.H,this.u)+(this.c||0);d>=e?(Uc(this),Tc(this,1E3/(Math.abs(this.f.playbackRate)||1))):(b=Vc(this,c,b))?(b=yc(this.a,b,this.v),this.v=null,this.G&&(this.G=!1,Wc(this,a)),b.then(B(this,function(a){this.m=!1;null==this.c&&(this.c=a);this.w&&0<xc(this.a,c)&&(this.w=!1,this.f.currentTime+=.001);Tc(this,0)})).catch(B(this,
function(a){if("aborted"!=a.type){var b=D(a);this.dispatchEvent(b);b=[0,404,410];"net"==a.type&&-1!=b.indexOf(a.Sb.status)&&Tc(this,5E3)}}))):(Uc(this),this.m||(this.m=!0,Xc(this)),Tc(this,1E3))}};function Vc(a,b,c){a=a.a;var d=a.b.length;a=0<d?a.b[d-1]:null;return null!=a?null!=a.a?c.fa(a.a):null:c.fa(b)}function Uc(a){if(!a.h&&null!=a.c){a.h=!0;var b=a.a,c=a.c,d=c-b.u;0!=d&&(b.b=dc(b.b,d),b.u=c);b=C({type:"started",bubbles:!1,K:a.c});a.dispatchEvent(b)}}
function Wc(a,b){var c=b.a.split("/")[0],c=C({type:"adaptation",bubbles:!0,contentType:c,size:"video"!=c?null:{width:b.width,height:b.height},bandwidth:b.bandwidth});a.dispatchEvent(c)}function Xc(a){var b=C({type:"ended"});a.dispatchEvent(b)}function Tc(a,b){a.i=window.setTimeout(a.Cb.bind(a),b)}function Rc(a){null!=a.i&&(window.clearTimeout(a.i),a.i=null)};function nc(a,b){J.call(this,b);this.a=null;this.c=a;this.b=0}p(nc,J);
function oc(a){if(!window.indexedDB)return Promise.reject(Error("Offline storage requires IndexedDB support."));var b=new z,c=window.indexedDB.open("content_database",1);c.onupgradeneeded=B(a,function(a){this.a=a.target.result;Yc(this,"group_store",{keyPath:"group_id"});Yc(this,"stream_index_store",{keyPath:"stream_id"});a=Yc(this,"content_store",{autoIncrement:"true"});a.createIndex("segment",["stream_id","segment_id"],{unique:!0});a.createIndex("stream","stream_id",{unique:!1})});c.onsuccess=B(a,
function(a){this.a=a.target.result;b.resolve()});c.onerror=function(){b.reject(c.error)};return b}function P(a){a.a&&a.a.close()}function Yc(a,b,c){a.a.objectStoreNames.contains(b)&&a.a.deleteObjectStore(b);return a.a.createObjectStore(b,c)}
function Zc(a,b,c,d,e){for(var f=[],g=[],h=0,l=0,m=[],t=b.map(function(a){return a.F.create()}),t=Promise.all(t),r=b.map(function(a){return a.A.create()}),r=Promise.all(r),t=Promise.all([t,r]).then(function(a){f=a[0];g=a[1];h=f.reduce(function(a,b){return a+b.length()},0)}),r=0;r<b.length;++r)t=t.then(function(a){return $c(this,b[a],f[a],g[a],h,l)}.bind(a,r)),t=t.then(function(a,b){l+=f[a].length();m.push(b)}.bind(a,r));return t.then(B(a,function(){return ad(bd(this))})).then(B(a,function(a){var b=
new z,f={group_id:a,stream_ids:m,session_ids:c,duration:d,key_system:e.b},g=bd(this).put(f);g.onsuccess=function(){b.resolve(a)};g.onerror=function(){b.reject(g.error)};return b}))}function $c(a,b,c,d,e,f){var g=[ad(cd(a)),ad(dd(a).index("stream"))],g=Promise.all(g).then(B(a,function(a){return{la:Math.max(a[0],a[1]),da:new ArrayBuffer(0),Aa:0,s:[],wa:null,Qb:e,Ta:f}})),g=g.then(a.mb.bind(a,c));return g=g.then(a.nb.bind(a,b,d))}
function ad(a){var b=new z,c=a.openCursor(null,"prev");c.onsuccess=function(a){a.target.result?b.resolve(a.target.result.key+1):b.resolve(0)};c.onerror=function(){b.reject(c.error)};return b}k=nc.prototype;k.nb=function(a,b,c){var d=new z;a={stream_id:c.la,mime_type:a.a,codecs:a.b,init_segment:b,references:c.s};var e=cd(this).put(a);e.onsuccess=function(){d.resolve(c.la)};e.onerror=function(){d.reject(e.error)};return d};
k.mb=function(a,b){for(var c=Promise.resolve(),d=0;d<a.length();++d)var e=a.get(d),f=this.ib.bind(this,e,b),c=c.then(this.Ib.bind(this,e)),c=c.then(f);return c.then(function(){return Promise.resolve(b)}).catch(B(this,function(a){ed(this,b.la);return Promise.reject(a)}))};
k.ib=function(a,b,c){var d=new z;0==b.da.byteLength&&(b.wa=a);b.da=fd(b.da,c);b.Ta++;var e=C({type:"progress",detail:b.Ta/b.Qb*100,bubbles:!0});if(1048576<=b.da.byteLength||null==a.a){c={stream_id:b.la,segment_id:b.Aa,content:b.da};var f=dd(this).put(c);b.s.push({start_time:b.wa.b,start_byte:b.wa.c,end_time:a.a,url:"idb://"+b.la+"/"+b.Aa});b.Aa++;b.da=new ArrayBuffer(0);f.onerror=function(){d.reject(f.error)};f.onsuccess=B(this,function(){this.dispatchEvent(e);d.resolve()})}else this.dispatchEvent(e),
d.resolve();return d};function fd(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer}k.Ib=function(a){a=new sc(a.url.toString(),a.c,a.f,void 0,void 0,this.b);a.f=this.c;return tc(a)};function pc(a,b,c){return gd(dd(a).index("segment"),[b,c]).then(function(a){return Promise.resolve(a.content)})}function hd(a,b){return gd(cd(a),b)}
function id(a,b){return gd(bd(a),b).then(B(a,function(a){return a.hasOwnProperty("duration")||a.hasOwnProperty("key_system")?Promise.resolve(a):hd(this,a.Vb[0]).then(function(b){a.duration=b.duration;a.key_system=b.key_system;return Promise.resolve(a)})}))}function jd(a){var b=new z,c=[],d=bd(a).openCursor();d.onerror=function(){b.reject(d.error)};d.onsuccess=function(a){(a=a.target.result)?(c.push(a.key),a.continue()):b.resolve(c)};return b}
function gd(a,b){var c=new z,d=a.get(b);d.onerror=function(){c.reject(d.error)};d.onsuccess=function(){if(d.result)c.resolve(d.result);else{var a=Error("Item not found.");a.type="storage";c.reject(a)}};return c}
function ed(a,b){var c=new z,d=cd(a).delete(b);d.onerror=function(){c.reject(d.error)};var e=dd(a);e.index("stream").openKeyCursor(IDBKeyRange.only(b)).onsuccess=function(a){if(a=a.target.result)e.delete(a.primaryKey),a.continue()};e.transaction.oncomplete=function(){c.resolve()};return c}k.Ob=function(a){return id(this,a).then(B(this,function(b){var c=[],d;for(d in b.stream_ids)c.push(ed(this,b.stream_ids[d]));b=bd(this);c.push(b.delete(a));return Promise.all(c)}))};
function dd(a){return kd(a,"content_store")}function cd(a){return kd(a,"stream_index_store")}function bd(a){return kd(a,"group_store")}function kd(a,b){return a.a.transaction([b],"readwrite").objectStore(b)};function ld(a){this.b=a;this.a=null}ld.prototype.destroy=function(){this.b=null;this.a&&(this.a.destroy(),this.a=null)};ld.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=[],b=0;b<this.b.length;++b){var c=this.b[b];a.push(new ac(c.start_time,c.end_time,c.start_byte,null,new L(c.url)))}this.b=null;this.a=new M(a);return Promise.resolve(this.a)};function md(a,b,c,d,e,f){ic.call(this,a);this.a.body=b;this.a.method=c;this.a.a=3;this.a.h=d;this.a.c=1E3*(null!=f?f:0);a=e||{};for(var g in a)this.a.b[g]=a[g]}p(md,ic);function nd(a){return a.sa().then(function(a){return Promise.resolve(new Uint8Array(a.response))})};function od(a,b,c){J.call(this,a);this.m=b;this.b=c;this.a=this.f=null;this.i=new Ra;this.h={};this.g=[];this.w=0;this.c=new z;this.u=null;this.v=0}p(od,J);od.prototype.destroy=function(){this.o=null;for(var a=0;a<this.g.length;++a)this.g[a].close().catch(function(){});this.g=[];this.h=this.a=this.f=null;this.i.destroy();this.m=this.b=this.i=null};
function vd(a){for(var b=new G,c=a.b.Ma(),d=0;d<c.length;++d){var e=c[d];e.a.b||e.b&&!wd(e.b)||b.push(e.contentType,e)}for(var d={},e=!1,f=0;f<c.length;++f){var g=c[f];if(g.a.b&&!b.a.hasOwnProperty(g.contentType)){var h=g.a.b,l=d[h];l||(l=g.a,l={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:l.i?"required":"optional",persistentState:l.m||a.b.ka()?"required":"optional"},d[h]=l);if(g.b&&(h=g.contentType+"Capabilities",h in l)){e=!0;l[h]||(l[h]=[]);var m;
"audio"==g.contentType?m=g.a.h:"video"==g.contentType&&(m=g.a.v);l[h].push({contentType:g.b,robustness:m})}}}if(!e)if(c.length)a.a=c[0].a;else throw a=Error("No DRM scheme info provided!"),a.type="drm",a;if(0==Object.keys(d).length)return a.b.Ba(b),a.c.resolve(),Promise.resolve();m=new z;d=xd(a,d,m);d=d.then(a.lb.bind(a,c,b));d=d.then(a.Kb.bind(a));m.reject(null);return d}
function yd(a,b){null==a.u&&(a.u=window.setTimeout(function(){var a=Error("Timeout waiting for sessions.");a.type="storage";this.c.reject(a)}.bind(a),b));return a.c}function xd(a,b,c){for(var d in b){var e=b[d];c=c.catch(function(){return navigator.requestMediaKeySystemAccess(d,[e])})}a.b.ka()&&(c=c.catch(function(){throw Error("Either none of the requested key systems are supported or none of the requested key systems support persistent state.");}));return c}k=od.prototype;
k.lb=function(a,b,c){for(var d=c.keySystem,e=c.getConfiguration(),f=["audio","video"],g=0;g<f.length;++g){var h=f[g];if(!b.a.hasOwnProperty(h)){var l=e[h+"Capabilities"];if(l&&l.length){for(var l=l[0],m=[],t={},r=0;r<a.length;++r){var A=a[r];A.a.b!=d||A.b!=l.contentType||A.id in t||(m.push(A),t[A.id]=!0,this.a?Mb(this.a,A.a):this.a=A.a)}b.a[h]=m}}}this.b.Ba(b);return c.createMediaKeys()};
k.Kb=function(a){this.f=a;return this.m.setMediaKeys(this.f).then(B(this,function(){return this.a.g?this.f.setServerCertificate(this.a.g):Promise.resolve()})).then(B(this,function(){if(0<this.b.ra().length)zd(this);else{for(var a=0;a<this.a.a.length;++a){var c=this.a.a[a];this.Ra({type:"encrypted",initDataType:c.initDataType,initData:c.initData})}0==this.a.a.length&&H(this.i,this.m,"encrypted",this.Ra.bind(this))}}))};
k.Ra=function(a){var b=new Uint8Array(a.initData),c=Array.prototype.join.apply(b);if(!this.h[c]){try{var d=Ad(this)}catch(e){d=D(e);this.dispatchEvent(d);this.c.reject(e);return}a=d.generateRequest(a.initDataType,a.initData);this.h[c]=!0;a.catch(B(this,function(a){if(this.h){this.h[c]=!1;var b=D(a);this.dispatchEvent(b);this.c.reject(a)}}));this.g.push(d)}};
function zd(a){for(var b=a.b.ra(),c=0;c<b.length;++c){var d=Ad(a),e=d.load(b[c]);a.g.push(d);e.catch(B(a,function(a){a=D(a);this.dispatchEvent(a)}))}}function Ad(a){var b=null;if(a.b.ka())try{b=a.f.createSession("persistent-license")}catch(c){throw Error("Persistent licenses are not supported by this key system or platform.");}else b=a.f.createSession();H(a.i,b,"message",a.wb.bind(a));H(a.i,b,"keystatuseschange",a.pb.bind(a));return b}k.wb=function(a){Bd(this,a.target,this.a,a.message)};
k.pb=function(a){var b=a.target.keyStatuses.values();for(a=b.next();!a.done;a=b.next()){var c=Cd[a.value];c&&(c=Error(c),c.type=a.value,a=D(c),this.dispatchEvent(a))}};
function Bd(a,b,c,d){d=Dd(c,d);nd(new md(d.url,d.body,d.method,c.u,d.headers,a.v)).then(B(a,function(a){c.c&&(a=c.c(a));return b.update(a)})).then(B(a,function(){var a=C({type:"sessionReady",detail:b});this.dispatchEvent(a);this.w++;this.w>=this.g.length&&this.c.resolve()})).catch(B(a,function(a){a.Ub=b;a=D(a);this.dispatchEvent(a)}))}
function Dd(a,b){var c={url:a.o,body:b.slice(0),method:"POST",headers:{}};if(!a.f)return c;a.f(c);c.url=Ba(c,"url","string");if(null==c.url)throw Error("'url' cannot be null.");if(!(c.body instanceof ArrayBuffer||"string"==typeof c.body||null==c.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");c.method=Ba(c,"method","string");if("GET"!=c.method&&"POST"!=c.method)throw Error("'method' must be either 'GET' or 'POST'.");c.headers=Ca(c,"headers",Object);if(null==c.headers)throw Error("'headers' cannot be null.");
return c}var Cd={"output-not-allowed":"The required output protection is not available.",expired:"A required key has expired and the content cannot be decrypted.","internal-error":"An unknown error has occurred in the CDM."};function Q(a,b,c,d){M.call(this,a);this.f=b;this.u=c;this.o=d;this.c=this.i=this.a=null;Ed(this)}p(Q,M);Q.prototype.destroy=function(){this.u=this.f=null;M.prototype.destroy.call(this)};Q.prototype.fa=function(a){Fd(this,$a()/1E3);return M.prototype.fa.call(this,a)};Q.prototype.za=function(a){fc(this,a);null==this.a&&Ed(this);return!0};
function Ed(a){if(0!=a.length()){a.length();var b=null!=O(a).a?O(a).a:O(a).b;if(a.f.b>a.o)a.a=b;else{var c=a.o-(a.f.b+a.u.start);0>c?a.a=b:c<Math.max(O(a).b,O(a).a||0)?(O(a),a.a=b):a.a=c}a.i=O(a).b;a.c=N(a).b}}Q.prototype.ea=function(a){a=M.prototype.ea.call(this,a);null!=this.a&&(this.i+=a,this.c+=a,this.i>this.a&&(this.a+=a));return a};Q.prototype.ya=function(){return Gd(this,$a()/1E3)};
function Gd(a,b){Fd(a,b);if(null==a.a||null==a.i||null==a.c)return{start:0,end:0};var c=b-a.o,d=a.a+c;null!=a.f.f&&(d=d-a.c-a.f.f,0<d&&(a.c+=d));c=a.i+c;c=0<a.length()?null!=O(a).a?Math.min(c,O(a).a):c:a.c;c=Math.max(c,a.c);return{start:a.c,end:c}}function Fd(a,b){if(null!=a.f.f)if(null==a.a)a.length();else{for(var c=a.a+(b-a.o),d=0,e=0;e<a.s.length;++e){var f=null;e<a.s.length-1?f=a.s[e+1].a:(f=a.s[e],f=null!=f.a?f.a+(f.a-f.b):null);if(null!=f&&f<c-a.f.f)++d;else break}0<d&&a.s.splice(0,d)}};function Hd(a,b,c,d){var e=1,f=0,g;if(a.b>d)g=null;else{var h=a.i||0,l=a.f||0;g=c.a;g=g.a/g.b;var m=d-(a.b+b.start);0>m?g=null:(l=m-2*g-l,0>l&&(l=0),l=Math.ceil(l/g)*g,m-=g,0>m?g=null:(h=Math.floor(m/g)*g-h,0>h&&(h=0),h=Math.floor(h/g)*g,g={La:l/g+1,current:(h>=l?h:l)/g+1}))}g&&(e=g.La,f=g.current-g.La+1);e=Id(c,e,f);if(null==e)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;Q.call(this,e,a,b,d);this.m=c;this.h=this.b=0<this.length()?a.b+b.start+O(this).a:null;this.g=g?g.current+
1:null}p(Hd,Q);Hd.prototype.destroy=function(){this.m=null;Q.prototype.destroy.call(this)};Hd.prototype.fa=function(a){var b=$a()/1E3;Jd(this,b);Fd(this,b);return M.prototype.fa.call(this,a)};Hd.prototype.za=function(a){if(null!=this.b||!(a instanceof Hd)||null==a.b)return!1;this.b=a.b;this.h=a.h;this.g=a.g;fc(this,a);Jd(this,$a()/1E3);Ed(this);return!0};Hd.prototype.ea=function(a){a=Q.prototype.ea.call(this,a);null!=this.b&&(this.b+=a,this.h+=a);return a};
Hd.prototype.ya=function(){var a=$a()/1E3;Jd(this,a);return Gd(this,a)};function Jd(a,b){if(null!=a.b&&null!=a.h&&null!=a.g){var c=a.m.a,c=c.a/c.b,d=Math.floor((a.h+(b-a.o)-a.b)/c);if(0!=d){var e=Id(a.m,a.g,d);Array.prototype.push.apply(a.s,dc(e,a.K));a.b+=d*c;a.g+=d}}};function Kd(){this.id=this.url=null;this.type="static";this.c=this.o=this.j=null;this.h=5;this.f=this.b=this.g=null;this.i=1;this.a=[]}function Ld(){this.g=this.f=this.c=this.j=this.a=this.start=this.id=null;this.b=[]}function Md(){this.o=this.b=this.height=this.width=this.contentType=this.lang=this.c=this.id=null;this.f=!1;this.i=this.h=this.g=this.j=null;this.m=[];this.a=[]}function Nd(){this.value=null}function Od(){this.contentType=this.lang=this.id=null}
function Pd(){this.a=this.b=this.f=this.j=this.h=this.c=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.g=[]}function Qd(){this.value=this.schemeIdUri=null;this.children=[];this.pssh=null}function Rd(){this.parsedPssh=this.psshBox=null}function Sd(){this.url=null}function Td(){this.url=null}function Ud(){this.j=null;this.g=1;this.c=this.b=this.a=this.f=null}
Ud.prototype.clone=function(){var a=new Ud;a.j=this.j?new L(this.j):null;a.g=this.g;a.f=this.f;a.a=R(this.a);a.b=R(this.b);a.c=R(this.c);return a};function Vd(){this.a=this.url=null}Vd.prototype.clone=function(){var a=new Vd;a.url=this.url?new L(this.url):null;a.a=R(this.a);return a};function Wd(){this.a=this.url=null}Wd.prototype.clone=function(){var a=new Wd;a.url=this.url?new L(this.url):null;a.a=R(this.a);return a};
function Xd(){this.j=null;this.f=1;this.b=this.i=null;this.h=1;this.g=null;this.a=[];this.c=null}Xd.prototype.clone=function(){var a=new Xd;a.j=this.j?new L(this.j):null;a.f=this.f;a.i=this.i;a.b=this.b;a.h=this.h;a.g=R(this.g);a.a=this.a.map(function(a){return a.clone()});a.c=R(this.c);return a};function Yd(){this.a=this.b=null}Yd.prototype.clone=function(){var a=new Yd;a.b=this.b?new L(this.b):null;a.a=R(this.a);return a};
function Zd(){this.b=1;this.a=this.o=null;this.i=1;this.c=this.g=this.f=this.h=null}Zd.prototype.clone=function(){var a=new Zd;a.b=this.b;a.o=this.o;a.a=this.a;a.i=this.i;a.h=this.h;a.f=this.f;a.g=this.g;a.c=R(this.c);return a};function $d(){this.a=[]}$d.prototype.clone=function(){var a=new $d;a.a=this.a.map(function(a){return a.clone()});return a};function ae(){this.b=this.a=this.c=null}ae.prototype.clone=function(){var a=new ae;a.c=this.c;a.a=this.a;a.b=this.b;return a};
function be(a,b){this.ia=a;this.end=b}be.prototype.clone=function(){return new be(this.ia,this.end)};Kd.TAG_NAME="MPD";Ld.TAG_NAME="Period";Md.TAG_NAME="AdaptationSet";Nd.TAG_NAME="Role";Od.TAG_NAME="ContentComponent";Pd.TAG_NAME="Representation";Qd.TAG_NAME="ContentProtection";Rd.TAG_NAME="cenc:pssh";Sd.TAG_NAME="BaseURL";Td.TAG_NAME="Location";Ud.TAG_NAME="SegmentBase";Vd.TAG_NAME="RepresentationIndex";Wd.TAG_NAME="Initialization";Xd.TAG_NAME="SegmentList";Yd.TAG_NAME="SegmentURL";Zd.TAG_NAME="SegmentTemplate";
$d.TAG_NAME="SegmentTimeline";ae.TAG_NAME="S";
Kd.prototype.parse=function(a,b){this.url=new L(a.j);this.id=S(b,"id",T);this.type=S(b,"type",T)||"static";this.c=S(b,"mediaPresentationDuration",ce);this.h=S(b,"minBufferTime",ce,this.h);this.g=S(b,"minimumUpdatePeriod",ce,this.g);this.b=S(b,"availabilityStartTime",de,this.b);this.f=S(b,"timeShiftBufferDepth",ce,this.f);this.i=S(b,"suggestedPresentationDelay",ce,this.i);var c=U(this,b,Sd);this.j=ee(a.j,c?c.url:null);if(c=U(this,b,Td))this.o=ee(a.j,c.url);this.a=fe(this,b,Ld)};
Ld.prototype.parse=function(a,b){this.id=S(b,"id",T);this.start=S(b,"start",ce);this.a=S(b,"duration",ce);var c=U(this,b,Sd);this.j=ee(a.j,c?c.url:null);this.c=U(this,b,Ud);this.f=U(this,b,Xd);this.g=U(this,b,Zd);this.b=fe(this,b,Md);ge(this)};function ge(a){for(var b=[],c=0;c<a.b.length;++c){var d=a.b[c];null!=d.c&&(b[d.c]=!0)}for(c=0;c<a.b.length;++c)if(d=a.b[c],null==d.c){for(var e=1;1==b[e];)++e;b[e]=!0;d.c=e}}
Md.prototype.parse=function(a,b){var c=U(this,b,Od)||{},d=U(this,b,Nd);this.id=S(b,"id",T);this.c=S(b,"group",V);this.lang=S(b,"lang",T,c.lang);this.contentType=S(b,"contentType",T,c.contentType);this.width=S(b,"width",W);this.height=S(b,"height",W);this.b=S(b,"mimeType",T);this.o=S(b,"codecs",T);this.f=d&&"main"==d.value;this.lang&&(this.lang=Wa(this.lang));c=U(this,b,Sd);this.j=ee(a.j,c?c.url:null);this.m=fe(this,b,Qd);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.g=a.c?
he(this,b,a.c):U(this,b,Ud);this.h=a.f?he(this,b,a.f):U(this,b,Xd);this.i=a.g?he(this,b,a.g):U(this,b,Zd);this.a=fe(this,b,Pd);!this.b&&this.a.length&&(this.b=this.a[0].c,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))};Nd.prototype.parse=function(a,b){this.value=S(b,"value",T)};Od.prototype.parse=function(a,b){this.id=S(b,"id",T);this.lang=S(b,"lang",T);this.contentType=S(b,"contentType",T);this.lang&&(this.lang=Wa(this.lang))};
Pd.prototype.parse=function(a,b){this.id=S(b,"id",T);this.bandwidth=S(b,"bandwidth",W);this.width=S(b,"width",W,a.width);this.height=S(b,"height",W,a.height);this.c=S(b,"mimeType",T,a.b);this.h=S(b,"codecs",T,a.o);this.lang=a.lang;var c=U(this,b,Sd);this.j=ee(a.j,c?c.url:null);this.g=fe(this,b,Qd);this.f=a.g?he(this,b,a.g):U(this,b,Ud);this.b=a.h?he(this,b,a.h):U(this,b,Xd);this.a=a.i?he(this,b,a.i):U(this,b,Zd);0==this.g.length&&(this.g=a.m)};
Qd.prototype.parse=function(a,b){this.schemeIdUri=S(b,"schemeIdUri",T);this.value=S(b,"value",T);this.pssh=U(this,b,Rd);this.children=Array.prototype.slice.call(b.childNodes)};Rd.prototype.parse=function(a,b){var c=ie(b);if(c){this.psshBox=eb(c);try{this.parsedPssh=new tb(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};Sd.prototype.parse=function(a,b){this.url=ie(b)};Td.prototype.parse=function(a,b){this.url=ie(b)};
Ud.prototype.parse=function(a,b){this.j=a.j||this.j;this.g=S(b,"timescale",W,this.g);this.f=S(b,"presentationTimeOffset",V,this.f);this.a=S(b,"indexRange",je,this.a);this.b=U(this,b,Vd)||this.b;this.c=U(this,b,Wd)||this.c};Vd.prototype.parse=function(a,b){var c=S(b,"sourceURL",T);this.url=ee(a.j,c);this.a=S(b,"range",je,R(a.a))};Wd.prototype.parse=function(a,b){var c=S(b,"sourceURL",T);this.url=ee(a.j,c);this.a=S(b,"range",je)};
Xd.prototype.parse=function(a,b){this.j=a.j||this.j;this.f=S(b,"timescale",W,this.f);this.i=S(b,"presentationTimeOffset",V,this.i);this.b=S(b,"duration",W,this.b);this.h=S(b,"startNumber",V,this.h);this.g=U(this,b,Wd)||this.g;this.a=fe(this,b,Yd)||this.a;this.c=U(this,b,$d)||this.c};Yd.prototype.parse=function(a,b){var c=S(b,"media",T);this.b=ee(a.j,c);this.a=S(b,"mediaRange",je)};
Zd.prototype.parse=function(a,b){this.b=S(b,"timescale",W,this.b);this.o=S(b,"presentationTimeOffset",V,this.o);this.a=S(b,"duration",W,this.a);this.i=S(b,"startNumber",V,this.i);this.h=S(b,"media",T,this.h);this.f=S(b,"index",T,this.f);this.g=S(b,"initialization",T,this.g);this.c=U(this,b,$d)||this.c};$d.prototype.parse=function(a,b){this.a=fe(this,b,ae)};ae.prototype.parse=function(a,b){this.c=S(b,"t",V);this.a=S(b,"d",V);this.b=S(b,"r",V)};
function ee(a,b){var c=b?new L(b):null;return a?c?a.resolve(c):a:c}function he(a,b,c){var d=R(c);(b=ke(b,c.constructor.TAG_NAME))&&d.parse(a,b);return d}function U(a,b,c){var d=null;if(b=ke(b,c.TAG_NAME))d=new c,d.parse(a,b);return d}function ke(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}
function fe(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.childNodes[e]);d.push(f)}return d}function ie(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function R(a){return a?a.clone():null}function S(a,b,c,d){a=c(a.getAttribute(b));return null!=a?a:void 0!==d?d:null}function de(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function ce(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=V(b[1]);c&&(a+=31536E3*c);(c=V(b[2]))&&(a+=2592E3*c);(c=V(b[3]))&&(a+=86400*c);(c=V(b[4]))&&(a+=3600*c);(c=V(b[5]))&&(a+=60*c);b=window.parseFloat(b[6]);(b=isNaN(b)?null:b)&&(a+=b);return a}
function je(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=V(b[1]);if(null==a)return null;b=V(b[2]);return null==b?null:new be(a,b)}function W(a){a=window.parseInt(a,10);return 0<a?a:null}function V(a){a=window.parseInt(a,10);return 0<=a?a:null}function T(a){return a};function Id(a,b,c){for(var d=a.a,e=[],f=0;f<c;++f){var g=f+b,h=(g-1)*d.a,l=h/d.b,h=(h+d.a)/d.b,g=le(a,g-1+d.i,(g-1)*d.a);if(!g)return null;e.push(new ac(l,h,0,null,new L(g)))}return e}function le(a,b,c){if(!a.a)return null;var d=a.a.h;return d?(b=me(d,a.id,b,a.bandwidth,c))?a.j?a.j.resolve(b):b:null:a.j?new L(a.j):null}
function me(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new L(a)}catch(g){if(g instanceof URIError)return null;throw g;}}
function ne(a){var b=0;a=a.a;for(var c=[],d=0;d<a.length&&a[d].a;++d)for(var e=a[d].c,e=null!=e?e:b,f=a[d].b||0,g=0;g<=f;++g){var h=e+a[d].a;0<c.length&&e!=b&&(c[c.length-1].end=e);c.push({start:e,end:h});b=e=h}return c};function oe(a,b,c,d){this.c=a;this.f=b;this.b=c;this.g=d;this.a=null}oe.prototype.destroy=function(){this.b=this.f=this.c=null;this.a&&(this.a.destroy(),this.a=null)};
oe.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.c.type)try{this.a=new Hd(this.c,this.f,this.b,this.g)}catch(a){return Promise.reject(a)}else{var b=this.b.a,b=Id(this.b,1,Math.ceil(this.f.a/(b.a/b.b)));if(!b)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b);this.a=new M(b)}return Promise.resolve(this.a)};function pe(a,b){ic.call(this,a);this.a.f="text";this.a.a=3;this.a.c=1E3*(null!=b?b:0);this.a.i=!0}p(pe,ic);function qe(a){var b=a.url;return a.sa().then(function(a){a=a.responseText;if(a=(new DOMParser).parseFromString(a,"text/xml")){var d={j:new L(b)};a=U(d,a,Kd)}else a=null;if(a)return Promise.resolve(a);a=Error("MPD parse failure.");a.type="mpd";return Promise.reject(a)})};function re(a,b,c,d){this.b=a;this.c=b;this.f=c;this.a=null;this.g=d}re.prototype.destroy=function(){this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null)};
re.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=this.f.b,b=[];a.c&&(b=ne(a.c));var c=0;a.b&&a.h?c=a.b*a.h:0<b.length&&(c=b[0].start);var d=[],e=a.a.length;0<b.length&&b.length!=a.a.length&&(e=Math.min(b.length,a.a.length));for(var f=0;f<e;++f){var g=a.a[f],h=null,l=null,m=c/a.f;a.b?(h=c+a.b,l=h/a.f):0<b.length?(h=b[f].end,l=h/a.f):(l=m+this.c.a,h=l*a.f);var c=h,h=0,t=null;g.a&&(h=g.a.ia,t=g.a.end);d.push(new ac(m,l,h,t,new L(g.b)))}this.a="dynamic"==this.b.type?new Q(d,
this.b,this.c,this.g):new M(d);return Promise.resolve(this.a)};function se(a,b,c,d){this.b=a;this.f=b;this.c=c;this.g=d;this.a=null}se.prototype.destroy=function(){this.c=this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null)};
se.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=this.c.a,b=ne(a.c),c=[],d=0;d<b.length;++d){var e=b[d].start,f=e/a.b,g=b[d].end/a.b,e=le(this.c,d+a.i,e);if(!e)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);c.push(new ac(f,g,0,null,new L(e)))}this.a="dynamic"==this.b.type?new Q(c,this.b,this.f,this.g):new M(c);return Promise.resolve(this.a)};function te(a,b,c,d,e,f){this.g=a;this.i=b;this.c=c;this.a=d;this.f=e;this.o=f;this.h=this.b=null}te.prototype.destroy=function(){this.i=this.g=null;Ec(this.a);this.a=null;this.f&&(Ec(this.f),this.f=null);this.h&&(this.h.destroy(),this.h=null);this.b=null};
te.prototype.create=function(){if(this.b)return this.b;var a=[Dc(this.a)];"webm"==this.c&&a.push(Dc(this.f));return this.b=Promise.all(a).then(B(this,function(a){var c=a[0];a=a[1]||null;var d=null;"mp4"==this.c?(d=new ec,d=d.parse(new DataView(c),this.a.c,this.a.url)):"webm"==this.c&&(d=new hc,d=d.parse(new DataView(c),new DataView(a),this.a.url));if(!d)return c=Error("Failed to parse segment references from",this.c,"container."),c.type="stream",Promise.reject(c);c="dynamic"==this.g.type?new Q(d,
this.g,this.i,this.o):new M(d);return Promise.resolve(c)}))};function ue(a){this.a=a}
function ve(a,b){for(var c=$a()/1E3,d=0;d<b.a.length;++d)for(var e=b.a[d],f=0;f<e.b.length;++f){var g=e.b[f];if("text"!=g.contentType)for(var h=0;h<g.a.length;++h){var l=g.a[h],m=0,m=m+(l.f?1:0),m=m+(l.b?1:0),m=m+(l.a?1:0);0==m?(g.a.splice(h,1),--h):1!=m&&(l.f?(l.b=null,l.a=null):l.b&&(l.a=null))}}we(b);for(d=0;d<b.a.length;++d)for(e=b.a[d],f=0;f<e.b.length;++f){h=g=e.b[f];l=null;for(m=0;m<h.a.length;++m){var t=h.a[m].c||"";l?t!=l&&(h.a.splice(m,1),--m):l=t}0==g.a.length&&(e.b.splice(f,1),--f)}"dynamic"==
b.type&&null==b.b&&(b.b=c);d=new Oc;"dynamic"==b.type&&(d.c=!0,d.f=b.g,d.g=b.o?new L(b.o):new L(b.url));d.b=b.h||5;for(e=0;e<b.a.length;++e){f=b.a[e];if(null==f.start)break;g=new Nc;g.id=f.id;g.start=f.start||0;g.b=f.a;for(h=0;h<f.b.length;++h){l=f.b[h];m=new Jc;m.id=l.id;m.c=l.c;m.lang=l.lang||"";m.contentType=l.contentType||"";m.b=l.f;for(t=0;t<l.a.length;++t){var r=l.a[t],A=m.a.slice(0),w=a,q=r,F=A,E=[];if(0==q.g.length)E.push(Lb());else if(w.a)for(var u=0;u<q.g.length;++u){var x=w.a(q.g[u]);x&&
E.push(x)}if(0==F.length)Array.prototype.push.apply(F,E);else for(w=0;w<F.length;++w){q=!1;for(u=0;u<E.length;++u)if(F[w].key()==E[u].key()){q=!0;break}q||(F.splice(w,1),--w)}if(!(0==A.length&&0<m.a.length)){w=b;E=f;F=c;if(r.j){q=null;u=1;x=0;if(r.f)q=r.c.split("/")[1],"mp4"!=q&&"webm"!=q?q=null:(u=r.f,"webm"!=q||u.c?u.a||u.b&&u.b.a?(x=u.b,x||(x=new Vd,x.url=new L(r.j),x.a=u.a?u.a.clone():null),x=xe(x),u=u.c?xe(u.c):null,F=new te(w,E,q,x,u,F),E=new Fc(u),w=new Gc,w.F=F,w.A=E,q=w):q=null:q=null),u=
r.f.g,x=r.f.f;else if(r.b)q=r.b,!q.b&&!q.c&&1<q.a.length?q=null:q.b||E.a||q.c||1!=q.a.length?q.c&&0===q.c.a.length?q=null:(q=q.g?xe(q.g):null,F=new re(w,E,r,F),E=new Fc(q),w=new Gc,w.F=F,w.A=E,q=w):q=null,u=r.b.f,x=r.b.i;else if(r.a){b:if(q=r.a,u=q,x=0,x+=u.f?1:0,x+=u.c?1:0,x+=u.a?1:0,0==x?u=!1:(1!=x&&(u.f?(u.c=null,u.a=null):u.c&&(u.a=null)),u=!0),u){u=null;if(q.g&&(u=(q=r.a.g)?ye(r,q,Wd):null,!u)){q=null;break b}q=u?xe(u):null;var u=r,x=q,I=u.a;if(I.f){I=void 0;I=u.c.split("/")[1];if("mp4"!=I&&
"webm"!=I)I=null;else if("webm"!=I||x)if(le(u,1,0)){var na=void 0;(na=(na=u.a.f)?ye(u,na,Vd):null)?(u=xe(na),I=new te(w,E,I,u,x,F)):I=null}else I=null;else I=null;F=I}else F=I.h?I.c?new se(w,E,u,F):I.a?"dynamic"!=w.type&&null==E.a?null:new oe(w,E,u,F):void 0:null;F?(E=new Fc(q),w=new Gc,w.F=F,w.A=E,q=w):q=null}else q=null;u=r.a.b;x=r.a.o}else"text"==r.c.split("/")[0]&&(q=new Gc,q.F=new gc(new L(r.j)));q?(q.id=r.id,x&&(q.c=-1*x/u),q.bandwidth=r.bandwidth,q.width=r.width,q.height=r.height,q.a=r.c||
"",q.b=r.h||"",r=q):r=null}else r=null;r&&(m.l.push(r),m.a=A)}}g.a.push(m)}d.a.push(g)}return d}
function we(a){if(a.a.length){null==a.a[0].start&&(a.a[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.c=null);b(a.c)&&1==a.a.length&&!b(a.a[0].a)&&(a.a[0].a=a.c);for(var c=0,d=!0,e=0;e<a.a.length;++e){var f=a.a[e-1],g=a.a[e],h=a.a[e+1]||{start:a.c};!b(g.start)&&f&&b(f.start)&&b(f.a)&&(g.start=f.start+f.a);!b(g.a)&&b(h.start)&&(g.a=h.start-g.start);null!=g.start&&null!=g.a?c+=g.a:d=!1}b(a.c)||(e=a.a[a.a.length-1],d?a.c=c:b(e.start)&&b(e.a)?a.c=e.start+e.a:"dynamic"!=a.type&&
(a.c=c))}}function ye(a,b,c){b=me(b,a.id,null,a.bandwidth,null);if(!b)return null;c=new c;c.url=a.j&&b?a.j.resolve(b):b;return c}function xe(a){var b=new L(a.url),c=0,d=null;a.a&&(c=a.a.ia,d=a.a.end);return new Cc(b,c,d)};function Ae(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[]}function Be(a,b){var c=new Ce(b);a.streamHistory.push(new De(c));if(c.videoHeight||!a.streamStats)a.streamStats=c}function Ce(a){this.videoWidth=a.width;this.videoHeight=a.height;this.videoMimeType=a.a;this.videoBandwidth=a.bandwidth}
function De(a){this.timestamp=$a()/1E3;this.value=a};function X(a){J.call(this,null);this.a=a;this.b=null;this.f=new Ra;this.i=null;this.H="en";this.D=this.v=null;this.m=!1;this.g=new Ae;this.w=!0;this.c={streamBufferSize:15,licenseRequestTimeout:0,mpdRequestTimeout:0,rangeRequestTimeout:0};this.B=1;this.u=new Kb;this.L=null}p(X,J);n("shaka.player.Player",X);X.version="v1.4.0-59-ga41e643";
X.isBrowserSupported=function(){return!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration&&!!window.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement"in document&&!!window.Uint8Array};function wd(a){return"text/vtt"==a?!!window.VTTCue:MediaSource.isTypeSupported(a)}X.isTypeSupported=wd;
X.setTextStyle=function(a){var b=document.getElementById("ShakaPlayerTextStyle");b||(b=document.createElement("style"),b.id="ShakaPlayerTextStyle",document.head.appendChild(b));for(b=b.sheet;b.cssRules.length;)b.deleteRule(0);b.insertRule("::cue { "+Fb(a)+" }",0)};X.prototype.destroy=function(){return this.M().then(B(this,function(){this.f.destroy();this.a=this.f=null})).catch(function(){})};X.prototype.destroy=X.prototype.destroy;
X.prototype.M=function(){if(!this.b)return Promise.resolve();this.m&&Ee(this);this.a.pause();Sa(this.f);Fe(this);Ge(this);this.i.destroy();this.i=null;this.a.src="";var a=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.m=!1;this.g=new Ae;return a};X.prototype.unload=X.prototype.M;
X.prototype.cb=function(a){var b=this.M();this.a.autoplay&&(ma("load"),H(this.f,this.a,"timeupdate",this.ob.bind(this)));a.P(this.c);a.Za(this.L);this.L=null;a.Ca(this.w);return b.then(B(this,function(){return a.V(this.H)})).then(B(this,function(){this.b=a;this.b.ua(this.u);this.i=new od(this,this.a,this.b);return vd(this.i)})).then(B(this,function(){H(this.f,this.a,"error",this.Lb.bind(this));H(this.f,this.a,"playing",this.tb.bind(this));H(this.f,this.a,"pause",this.sb.bind(this));return this.b.Ja(this,
this.a)})).then(B(this,function(){He(this)})).catch(B(this,function(b){a.destroy();this.b=null;this.i&&(this.i.destroy(),this.i=null);var d=D(b);this.dispatchEvent(d);return Promise.reject(b)}))};X.prototype.load=X.prototype.cb;k=X.prototype;k.ob=function(){qa("load");this.g.playbackLatency=ra("load")/1E3;this.f.na(this.a,"timeupdate")};k.Lb=function(a){this.a.error&&(a=this.a.error.code,a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(Ie[a]||"Unknown playback error."),a.type="playback",a=D(a),this.dispatchEvent(a)))};
k.tb=function(){ma("playing");!this.v&&0>this.B&&(this.a.playbackRate=0,this.G(this.a.currentTime,Date.now(),this.B));this.m&&Ee(this)};k.sb=function(){qa("playing");var a=ra("playing");if(!isNaN(a)){var b=this.g;b.playTime+=a/1E3}Ge(this)};
k.$a=function(){if(!this.a.paused){qa("playing");var a=ra("playing");if(!isNaN(a)){var b=this.g;b.playTime+=a/1E3;ma("playing")}}a=this.g;b=this.a;b.getVideoPlaybackQuality&&(b=b.getVideoPlaybackQuality(),a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames);return this.g};X.prototype.getStats=X.prototype.$a;X.prototype.ga=function(){return this.b?this.b.Fa():[]};X.prototype.getVideoTracks=X.prototype.ga;X.prototype.ba=function(){return this.b?this.b.Ea():[]};
X.prototype.getAudioTracks=X.prototype.ba;X.prototype.qa=function(){return this.b?this.b.Va():[]};X.prototype.getTextTracks=X.prototype.qa;X.prototype.gb=function(a,b){return this.b?this.b.Ga(a,void 0==b?!0:b):!1};X.prototype.selectVideoTrack=X.prototype.gb;X.prototype.eb=function(a,b){return this.b?this.b.Xa(a,void 0==b?!0:b):!1};X.prototype.selectAudioTrack=X.prototype.eb;X.prototype.fb=function(a){return this.b?this.b.Ya(a,!1):!1};X.prototype.selectTextTrack=X.prototype.fb;
X.prototype.T=function(a){this.b&&this.b.Da(a)};X.prototype.enableTextTrack=X.prototype.T;X.prototype.oa=function(a){this.h({enableAdaptation:a})};X.prototype.enableAdaptation=X.prototype.oa;X.prototype.P=function(){return this.w};X.prototype.getAdaptationEnabled=X.prototype.P;X.prototype.aa=function(a){this.h({streamBufferSize:a})};X.prototype.setStreamBufferSize=X.prototype.aa;X.prototype.X=function(){return Number(this.c.streamBufferSize)};X.prototype.getStreamBufferSize=X.prototype.X;
X.prototype.bb=function(a){this.h({licenseRequestTimeout:a})};X.prototype.setLicenseRequestTimeout=X.prototype.bb;X.prototype.Z=function(a){this.h({mpdRequestTimeout:a})};X.prototype.setMpdRequestTimeout=X.prototype.Z;X.prototype.jb=function(a){this.h({rangeRequestTimeout:a})};X.prototype.setRangeRequestTimeout=X.prototype.jb;X.prototype.$=function(a){this.h({preferredLanguage:a})};X.prototype.setPreferredLanguage=X.prototype.$;
X.prototype.I=function(a){Ge(this);0<=a?this.a.playbackRate=a:this.a.paused||(this.a.playbackRate=0,this.G(this.a.currentTime,Date.now(),a));this.B=a};X.prototype.setPlaybackRate=X.prototype.I;X.prototype.R=function(){return this.B};X.prototype.getPlaybackRate=X.prototype.R;X.prototype.kb=function(a){this.h({restrictions:a})};X.prototype.setRestrictions=X.prototype.kb;X.prototype.S=function(){return this.u.clone()};X.prototype.getRestrictions=X.prototype.S;X.prototype.hb=function(a){this.L=a};
X.prototype.setPlaybackStartTime=X.prototype.hb;X.prototype.ha=function(){return this.b?this.b.Wa():!1};X.prototype.isLive=X.prototype.ha;
X.prototype.h=function(a){if(a){var b;b=Ba(a,"enableAdaptation","boolean");null!=b&&(this.w=b,this.b&&this.b.Ca(b));b=Aa(a,"streamBufferSize");null!=b&&(this.c.streamBufferSize=b);b=Aa(a,"licenseRequestTimeout");null!=b&&(this.c.licenseRequestTimeout=b);b=Aa(a,"mpdRequestTimeout");null!=b&&(this.c.mpdRequestTimeout=b);b=Aa(a,"rangeRequestTimeout");null!=b&&(this.c.rangeRequestTimeout=b);this.b&&this.b.P(this.c);b=Ba(a,"preferredLanguage","string");null!=b&&(this.H=Wa(b));a=Ca(a,"restrictions",Kb);
null!=a&&(this.u=a.clone(),this.b&&this.b.ua(this.u))}};X.prototype.configure=X.prototype.h;X.prototype.pa=function(){return{enableAdaptation:this.w,streamBufferSize:this.c.streamBufferSize,licenseRequestTimeout:this.c.licenseRequestTimeout,mpdRequestTimeout:this.c.mpdRequestTimeout,rangeRequestTimeout:this.c.rangeRequestTimeout,preferredLanguage:this.H,restrictions:this.u.clone()}};X.prototype.getConfiguration=X.prototype.pa;function Ge(a){a.v&&(window.clearTimeout(a.v),a.v=null)}
function He(a){Fe(a);a.D=window.setTimeout(a.Y.bind(a),100)}function Fe(a){a.D&&(window.clearTimeout(a.D),a.D=null)}X.prototype.G=function(a,b,c){var d=.1*Math.abs(c);this.a.buffered.length&&this.a.buffered.start(0)+d<this.a.currentTime?(this.a.currentTime=a+(Date.now()-b)/1E3*c,this.v=window.setTimeout(this.G.bind(this,a,b,c),100)):this.a.pause()};function Ee(a){qa("buffering");var b=a.g;b.bufferingTime+=ra("buffering")/1E3;a.m=!1;a.dispatchEvent(C({type:"bufferingEnd"}))}
X.prototype.Y=function(){He(this);if(!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=b-this.a.currentTime,b=b+.05;this.m?a>this.b.Na()&&(Ee(this),this.a.play()):b<this.a.duration&&.1>a&&!this.a.paused&&(this.m=!0,this.a.pause(),this.g.bufferingHistory.push($a()/1E3),ma("buffering"),this.dispatchEvent(C({type:"bufferingStart"})))}};var Ie={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function Je(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d){for(var e=c.a[d],f=e,g=0;g<f.l.length;++g)wd(Ic(f.l[g]))||(f.l.splice(g,1),--g);0==e.l.length&&(c.a.splice(d,1),--d)}}function Ke(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d)c.a[d].l.sort(Le)}function Le(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function Me(a){this.a=a}Me.prototype.destroy=function(){this.a.destroy();this.a=null};function Ne(a,b){var c=Oe(b),d=Oe(a.a);return Promise.all([c,d]).then(B(a,function(a){var c=a[0];a=a[1];var d=this.a.a;Je(d);Ke(d);b.f=this.a.f;b.g=this.a.g?new L(this.a.g):null;b.b=this.a.b;d=[];Pe(b,this.a,c,a,d);c=b.a;Je(c);Ke(c);return Promise.resolve(d)}))}
function Oe(a){function b(a,b){return a.concat(b)}var c=a.a.map(function(a){return a.a}).reduce(b,[]).map(function(a){return a.l}).reduce(b,[]);a=c.map(function(a){return a.F.create()});return Promise.all(a).then(function(a){for(var b={},f=0;f<c.length;++f)b[c[f].C]=a[f];return Promise.resolve(b)})}
function Pe(a,b,c,d,e){var f=new G;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new G;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=Qa(f);for(b=0;b<a.length;++b){var h=a[b],l=f.get(h);1<l.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(Qe(l[0],h[0],c,d,e),l[0].b=h[0].b)}}
function Qe(a,b,c,d,e){var f=new G;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new G;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=Qa(f);for(b=0;b<a.length;++b){var h=a[b],l=f.get(h);1<l.length||(h=g.get(h))&&0!=h.length&&1==h.length&&Re(l[0],h[0],c,d,e)}}
function Re(a,b,c,d,e){var f=new G;a.l.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new G;b.l.forEach(function(a,b){g.push(a.id||""+b,a)});b={};for(var h=Qa(f),l=0;l<h.length;++l){var m=h[l];b[m]=m;var t=f.get(m);1<t.length||((m=g.get(m))&&0!=m.length?1==m.length&&(Se(t[0],m[0],c,d),t[0].A=m[0].A,m[0].A=null,t[0].c=m[0].c):(e.push(t[0]),a.l.splice(a.l.indexOf(t[0]),1)))}h=Qa(g);for(l=0;l<h.length;++l)m=h[l],b[m]||(b[m]=m,m=g.get(m),a.l.push(m[0]))}
function Se(a,b,c,d){a=c[a.C];b=d[b.C];a.length();a.za(b)&&a.length()};function Te(){this.a=this.c=null;this.f=new Ra;this.b=Number.POSITIVE_INFINITY;this.g=!0}n("shaka.media.SimpleAbrManager",Te);Te.prototype.destroy=function(){this.f.destroy();this.a=this.c=this.f=null};Te.prototype.start=function(a,b){this.c&&this.a||(this.c=a,this.a=b,this.b=Date.now()+4E3,H(this.f,this.c,"bandwidth",this.i.bind(this)),H(this.f,this.a,"adaptation",this.h.bind(this)))};Te.prototype.enable=function(a){this.g=a};
Te.prototype.getInitialVideoTrackId=function(){if(!this.a||!this.c)return null;var a=Ue(this);return a?a.id:null};Te.prototype.i=function(){if(this.g&&!(Date.now()<this.b)){var a=Ue(this);if(a){if(a.active){this.b=Date.now()+3E3;return}this.a.Ga(a.id,!1)}this.b=Number.POSITIVE_INFINITY}};Te.prototype.h=function(){this.b==Number.POSITIVE_INFINITY&&(this.b=Date.now()+3E4)};
function Ue(a){var b=a.a.Fa();if(0==b.length)return null;b.sort(yb);var c;a:{c=a.a.Ea();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=a.c.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&a<=g&&(d=f,d.active)))break}return d};function Y(a,b,c){J.call(this,null);this.a=a;this.B=b;this.i=new Ra;this.g=new MediaSource;this.f=null;this.Z=0;this.c=new G;this.H=c;this.v=!1;this.D="";this.aa=!1;this.G=null;this.X=new z;this.u=this.Y=null;this.qa=1;this.b={};this.pa=Number.POSITIVE_INFINITY;this.w=Number.NEGATIVE_INFINITY;this.L=0;this.oa=!1;this.m={};this.R=this.M=this.S=null;this.$={}}p(Y,J);n("shaka.player.StreamVideoSource",Y);
Y.prototype.P=function(a){null!=a.streamBufferSize&&(this.$.streamBufferSize=a.streamBufferSize);null!=a.rangeRequestTimeout&&(this.$.rangeRequestTimeout=a.rangeRequestTimeout);for(var b in this.b)this.b[b].B(this.$);null!=a.mpdRequestTimeout&&(this.Z=Number(a.mpdRequestTimeout))};
Y.prototype.destroy=function(){this.M&&(window.clearTimeout(this.M),this.M=null);this.S&&(window.clearTimeout(this.S),this.S=null);this.m=null;this.i.destroy();this.i=null;za(this.b).forEach(function(a){a.destroy()});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.H.destroy();this.o=this.Y=this.X=this.G=this.f=this.g=this.B=this.H=null};k=Y.prototype;
k.Ja=function(a,b){if(!this.v){var c=Error("Cannot call attach() right now.");c.type="stream";return Promise.reject(c)}this.o=a;this.f=b;this.G=a.$a();H(this.i,this.g,"sourceopen",this.rb.bind(this));H(this.i,this.B,"bandwidth",this.Mb.bind(this));c=this.f.mediaKeys;this.f.src=window.URL.createObjectURL(this.g);c=this.f.setMediaKeys(c);return Promise.all([this.X,c])};
k.V=function(a){if(this.v)return a=Error("Cannot call load() right now."),a.type="stream",Promise.reject(a);if(!this.a||0==this.a.a.length)return a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a);this.D=a;a=this.a.a;Je(a);Ke(a);if(0==this.a.a.length||0==this.a.a[0].a.length)return a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a);this.v=!0;return Promise.resolve()};
k.Ab=function(){var a=Date.now(),b=this.S=null;this.Sa(this.a.g).then(B(this,function(a){b=new Me(a);return Ne(b,this.a)})).then(B(this,function(c){b.destroy();b=null;for(var d=0;d<c.length;++d)Ve(this,c[d]);this.Y&&this.ua(this.Y);0==Object.keys(this.b).length?We(this):Xe(this,(Date.now()-a)/1E3)})).catch(B(this,function(a){b&&(b.destroy(),b=null);"aborted"!=a.type&&(a=D(a),this.dispatchEvent(a),this.a&&Xe(this,0))}))};k.Sa=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};
function Ve(a,b){var c=b.a.split("/")[0],d=a.b[c];if(d&&d.ja()==b){var e=a.c.get(b.a.split("/")[0]),f=e.map(function(a){return a.l}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.enabled});if(0==f.length){e.push(b);return}a.m[c].Ha==b&&delete a.m[c];d.ma(f[0],a.a.b,!0);b.destroy()}b.destroy()}
k.Fa=function(){if(!this.c.a.hasOwnProperty("video"))return[];for(var a=this.b.video,a=(a=a?a.ja():null)?a.C:0,b=[],c=this.c.get("video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.l.length;++f){var g=e.l[f];if(g.enabled){var h=g.C,g=new xb(h,g.bandwidth,g.width,g.height);h==a&&(g.active=!0);b.push(g)}}return b};
k.Ea=function(){if(!this.c.a.hasOwnProperty("audio"))return[];for(var a=this.b.audio,a=(a=a?a.ja():null)?a.C:0,b=[],c=this.c.get("audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.l.length;++g){var h=e.l[g],l=h.C,h=new Ab(l,h.bandwidth,f);l==a&&(h.active=!0);b.push(h)}return b};
k.Va=function(){if(!this.c.a.hasOwnProperty("text"))return[];for(var a=this.b.text,b=a?a.ja():null,b=b?b.C:0,c=[],d=this.c.get("text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,h=0;h<f.l.length;++h){var l=f.l[h].C,m=new zb(l,g);l==b&&(m.active=!0,m.enabled=a.xa());c.push(m)}return c};k.Na=function(){return this.a&&this.a.b||0};k.Ma=function(){var a;if(this.v){a=this.a.a[0];for(var b=[],c=0;c<a.a.length;++c)b.push.apply(b,Lc(a.a[c]));a=b}else a=[];return a};
k.Ba=function(a){if(this.v){for(var b={},c=this.a.a[0],d=0;d<c.a.length;++d){var e=c.a[d];b[e.C]=e}this.c.a={};c=Qa(a);for(d=0;d<c.length;++d){var e=c[d],f=a.get(e);if("video"==e){var g=f[0].id;this.c.push(e,b[g])}else if("audio"==e)for(var g=f[0].b.split(";")[0],h=0;h<f.length;++h){var l=f[h];l.b.split(";")[0]==g&&this.c.push(e,b[l.id])}else for(h=0;h<f.length;++h)g=f[h].id,this.c.push(e,b[g])}this.aa=!0;if(a=this.c.get("audio"))Ye(this,a),this.c.a.audio=a,a=a[0].lang||this.D,Va(2,this.D,a)&&(this.aa=
!1);if(a=this.c.get("text"))Ye(this,a),this.c.a.text=a,a=a[0].lang||this.D,Va(2,this.D,a)||(this.aa=!1)}};k.Ga=function(a,b){return Ze(this,"video",a,b)};k.Xa=function(a,b){return Ze(this,"audio",a,b)};k.Ya=function(a,b){return Ze(this,"text",a,b)};k.Da=function(a){var b=this.b.text;b&&b.ta(a)};k.Za=function(a){this.R=a};k.Ca=function(a){this.H.enable(a)};
k.ua=function(a){if(this.v){this.Y=a;for(var b=0;b<this.a.a.length;++b)for(var c=this.a.a[b],d=0;d<c.a.length;++d)for(var e=c.a[d],f=0;f<e.l.length;++f){var g=e.l[f];g.enabled=!0;a.maxWidth&&g.width>a.maxWidth&&(g.enabled=!1);a.maxHeight&&g.height>a.maxHeight&&(g.enabled=!1);a.maxBandwidth&&g.bandwidth>a.maxBandwidth&&(g.enabled=!1);a.minBandwidth&&g.bandwidth<a.minBandwidth&&(g.enabled=!1)}}};k.ra=function(){return[]};k.ka=function(){return!1};k.Wa=function(){return this.a?this.a.c:!1};
function Ze(a,b,c,d){if(!a.c.a.hasOwnProperty(b)||!a.b[b])return!1;for(var e=a.c.get(b),f=0;f<e.length;++f)for(var g=e[f],h=0;h<g.l.length;++h){var l=g.l[h];if(l.C==c){if("text"!=b&&!a.oa)return c=a.m[b],a.m[b]={Ha:l,Ka:null!=c&&c.Ka||d},!0;Be(a.G,l);a.b[b].ma(l,a.a.b,d);return!0}}return!1}
function Ye(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if(Va(c,a.D,e.lang)){b.splice(d,1);b.splice(0,0,e);return}}for(d=0;d<b.length;++d)if(e=b[d],e.b){b.splice(d,1);b.splice(0,0,e);break}}k.rb=function(){this.i.na(this.g,"sourceopen");We(this).then(B(this,function(){this.X.resolve()})).catch(B(this,function(a){this.X.reject(a)}))};
function We(a){for(var b=[],c=["audio","video","text"],d=0;d<c.length;++d){var e=c[d];a.c.a.hasOwnProperty(e)&&b.push(a.c.get(e)[0])}a.H.start(a.B,a);var f=$e(a,b),b=za(f).map(function(a){return a.F.create()});return Promise.all(b).then(B(a,function(a){if(!a.every(function(a){return a.length()}))return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);a=af(this,a);if(!a)return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);if(!bf(this,f))return a=
Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a);cf(this,f,a);return Promise.resolve()})).catch(B(a,function(a){if("aborted"!=a.type)return Object.keys(this.b),this.a.c?(Xe(this,0),Promise.resolve()):Promise.reject(a)}))}
function $e(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],f=e.l[0];if("video"==e.contentType)for(var g=a.H.getInitialVideoTrackId(),h=0;h<e.l.length&&(f=e.l[h],f.C!=g);++h);else"audio"==e.contentType&&(f=e.l[Math.floor(e.l.length/2)]);c[e.contentType]=f}return c}function bf(a,b){var c={},d;for(d in b){var e=b[d],e="text"==d?new Pc(a,a.f):df(a,e);if(!e)return za(c).forEach(function(a){a.destroy()}),!1;c[d]=e}a.b=c;return!0}
function df(a,b){var c;try{c=a.g.addSourceBuffer(Ic(b))}catch(d){return null}try{c.timestampOffset=b.c}catch(e){return null}c=new Qc(a,a.f,a.g,c,a.B);c.B(a.$);return c}
function cf(a,b,c){a.qa=a.f.playbackRate;a.f.playbackRate=0;var d;a.a.c?(a.g.duration=c.end+2592E3,d=c.end):(a.g.duration=c.end-c.start,d=a.R&&a.R<=c.end&&a.R>=c.start?a.R:c.start);H(a.i,a.f,"seeking",a.vb.bind(a));a.f.currentTime!=d&&(a.f.currentTime=d,a.u=d);ef(a,c.start,c.end);for(var e in a.b)c=a.b[e],H(a.i,c,"started",a.yb.bind(a)),H(a.i,c,"ended",a.xb.bind(a)),d=b[e],Be(a.G,d),c.ma(d,a.a.b,!1);a.Da(a.aa)}
k.yb=function(a){this.pa=Math.min(this.pa,a.K);this.w=Math.max(this.w,a.K);for(var b in this.b)if(!this.b[b].Qa())return;ff(this)};
function ff(a){for(var b=gf(a),c=0;c<b.length;++c)b[c].ea(a.w);hf(a,b);b=Oa(a.c).map(function(a){return a.l}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.F.create()];a.A&&b.push(a.A.create());return Promise.all(b)});Promise.all(b).then(B(a,function(a){for(var b=0;b<a.length;++b)a[b][0].ea(this.w);this.oa=!0;for(var c in this.m)a=this.m[c],b=this.b[c],Be(this.G,a.Ha),b.ma(a.Ha,this.a.b,a.Ka);this.m={}})).catch(B(a,function(a){"aborted"!=a.type&&(a=D(a),this.dispatchEvent(a))}))}
function hf(a,b){var c=af(a,b);c&&ef(a,c.start,c.end);var d;0!=a.w?(d=a.f.currentTime+a.w,a.f.currentTime=d,a.u=d):d=a.f.currentTime;a.a.c&&c&&(a.L=c.end-d,a.L=Math.max(a.L,0));a.f.playbackRate=a.qa;null!=a.a.f&&Xe(a,a.L);jf(a)}k.Bb=function(){this.M=null;jf(this);var a=af(this,gf(this));a&&(ef(this,a.start,a.end),this.f.paused||kf(this,this.f.currentTime,a.start,a.end))};function ef(a,b,c){b=C({type:"seekrangechanged",bubbles:!0,start:b,end:c});a.dispatchEvent(b)}
k.vb=function(){var a=this.f.currentTime;if(null!=this.u){if(a>=this.u-.01&&a<=this.u+.01){this.u=null;return}this.u=null}var b=af(this,gf(this));if(b){var c=b.end;(b=kf(this,a,b.start,c))||(a<=c+.01?b=!1:(this.f.currentTime=c,b=!0));if(!b)for(var d in this.b)this.b[d].Ua()}};function kf(a,b,c,d){if(b>=c-.01)return!1;a.f.currentTime=Math.min(c+(a.a.c?a.a.b:0),d);return!0}k.xb=function(){if(!this.a.c){for(var a in this.b)if(!this.b[a].Pa())return;"open"==this.g.readyState&&this.g.endOfStream()}};
k.Mb=function(){var a=this.G,b=this.B.getBandwidth();a.estimatedBandwidth=b;a.bandwidthHistory.push(new De(b))};function gf(a){return za(a.b).map(function(a){return a.Oa()}).filter(function(a){return null!=a})}
function af(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=0;e<b.length;++e){var f=b[e].ya(),c=Math.max(c,f.start);null!=f.end&&(d=Math.min(d,f.end))}if(d==Number.POSITIVE_INFINITY)if(d=a.a.a[0],d.b)d=(d.start||0)+d.b;else return null;a.a.c&&(d=Math.max(d-(a.a.b+a.L),c));return c>d?null:{start:c,end:d}}function Xe(a,b){if(null!=a.a.f){var c=Math.max(a.a.f,3),c=Math.max(c-b,0);a.S=window.setTimeout(a.Ab.bind(a),1E3*c)}}function jf(a){a.a.c&&(a.M=window.setTimeout(a.Bb.bind(a),1E3))};function Z(a,b,c){b||(b=new wb);c||(c=new Te);Y.call(this,null,b,c);this.T=a;this.I=[];this.timeoutMs=3E4;this.h={}}p(Z,Y);n("shaka.player.OfflineVideoSource",Z);Z.prototype.P=function(a){null!=a.licenseRequestTimeout&&(this.h.licenseRequestTimeout=a.licenseRequestTimeout);null!=a.rangeRequestTimeout&&(this.h.rangeRequestTimeout=a.rangeRequestTimeout);Y.prototype.P.call(this,a)};
Z.retrieveGroupIds=function(){var a=new nc(null,null),b=oc(a).then(function(){return jd(a)});b.then(function(){P(a)}).catch(function(){P(a)});return b};
Z.prototype.ha=function(a,b,c,d){var e,f={},g=[];a=new pe(a,this.Z);var h=Wa(b);return qe(a).then(B(this,function(a){this.a=ve(new ue(c),a);return this.a.c?Promise.reject(Error("Unable to store live streams offline.")):Y.prototype.V.call(this,h)})).then(B(this,function(){var a=document.createElement("video");a.src=window.URL.createObjectURL(this.g);e=new od(null,a,this);null!=this.h.licenseRequestTimeout&&(e.v=Number(this.h.licenseRequestTimeout));H(this.i,e,"sessionReady",this.ba.bind(this));return vd(e)})).then(B(this,
function(){for(var a=Oa(this.c),b=0;b<a.length;++b)for(var c=a[b],e=0;e<c.l.length;++e){var g=c.l[e];f[g.C]=g}return d()})).then(B(this,function(a){for(var b=0;b<a.length;++b){var c=a[b],d=f[c];if(d)g.push(d);else return Promise.reject(Error("Invalid stream ID chosen: "+c))}var e=["audio","video"];g=g.filter(function(a){return 0>e.indexOf(a.a.split("/")[0])?!1:!0});a=g.map(function(a){return a.A.create()});return Promise.all(a)})).then(B(this,function(a){for(var b=g,c=[],d=0;d<b.length;++d)try{c[d]=
this.g.addSourceBuffer(Ic(b[d]))}catch(e){}if(b.length!=c.length)a=Error("Error initializing streams."),a.type="storage",a=Promise.reject(a);else{for(d=0;d<a.length;++d)(b=a[d])&&c[d].appendBuffer(b);a=Promise.resolve()}return a})).then(B(this,function(){return yd(e,this.timeoutMs)})).then(B(this,function(){return lf(this,g,e.a,this.a.a[0].b)}))};Z.prototype.store=Z.prototype.ha;Z.prototype.ba=function(a){this.I.push(a.detail.sessionId)};
function lf(a,b,c,d){var e=new nc(a.B,a);null!=a.h.rangeRequestTimeout&&(e.b=Number(a.h.rangeRequestTimeout));var f=oc(e);return f=f.then(B(a,function(){return Zc(e,b,this.I,d,c)})).then(function(a){P(e);return Promise.resolve(a)}).catch(function(a){P(e);return Promise.reject(a)})}
Z.prototype.V=function(a){var b=new nc(null,null);null!=this.h.rangeRequestTimeout&&(b.b=Number(this.h.rangeRequestTimeout));var c,d;return oc(b).then(B(this,function(){return id(b,this.T)})).then(B(this,function(a){var f=[];this.I=a.session_ids;c=a.duration;d=a.key_system;for(var g=0;g<a.stream_ids.length;++g)f.push(hd(b,a.stream_ids[g]));return Promise.all(f)})).then(B(this,function(b){var f=c,g=d,h=new Oc;h.b=5;for(var l=new Nc,m=0;m<b.length;++m){var t=b[m],r=new Gc,A=new ld(t.references),w=new Uint8Array(t.init_segment),
w=new L("data:application/octet-stream;base64,"+db(w)),w=new Fc(new Cc(w,0,null));r.F=A;r.A=w;r.a=t.mime_type;r.b=t.codecs;t=new Hb(g,"",!1,null);A=new Jc;A.l.push(r);A.a.push(t);A.contentType=r.a.split("/")[0];l.a.push(A);l.b=f}h.a.push(l);this.a=h;return Y.prototype.V.call(this,a)})).then(function(){P(b);return Promise.resolve()}).catch(function(a){P(b);return Promise.reject(a)})};
Z.prototype.ga=function(){var a=new nc(null,null);null!=this.h.rangeRequestTimeout&&(a.b=Number(this.h.rangeRequestTimeout));return oc(a).then(a.Ob.bind(a,this.T)).then(function(){P(a);return Promise.resolve()}).catch(function(b){P(a);return Promise.reject(b)})};Z.prototype.deleteGroup=Z.prototype.ga;Z.prototype.ra=function(){return this.I};Z.prototype.ka=function(){return!0};function mf(a,b,c,d){c||(c=new wb);d||(d=new Te);Y.call(this,null,c,d);this.ga=a;this.I=b;this.h=[];this.T=[];this.ba=[]}p(mf,Y);n("shaka.player.DashVideoSource",mf);mf.prototype.ha=function(a,b,c){this.h.push(a);this.T.push(b||"");this.ba.push(c||"")};mf.prototype.addExternalCaptions=mf.prototype.ha;mf.prototype.destroy=function(){this.I=null;Y.prototype.destroy.call(this)};
mf.prototype.V=function(a){return qe(new pe(this.ga,this.Z)).then(B(this,function(b){for(var c=0;c<this.h.length;c++){var d=b,e=this.h[c],f=this.T[c],g=this.ba[c];if(0!==d.a.length){var h=new Md;h.contentType="text";h.lang=f||"en";h.f=!0;f=new Pd;f.bandwidth=0;f.c=g||"text/vtt";f.j=new L(e);h.a.push(f);d.a[0].b.push(h);ge(d.a[0])}}this.a=ve(new ue(this.I),b);return Y.prototype.V.call(this,a)}))};
mf.prototype.Sa=function(a){return qe(new pe(a.toString(),this.Z)).then(B(this,function(a){a=ve(new ue(this.I),a);return Promise.resolve(a)}))};function nf(a,b,c){J.call(this,null);this.f=a;this.c=b;this.b=c?c:Lb();this.a=null}p(nf,J);n("shaka.player.HttpVideoSource",nf);nf.prototype.P=function(){};nf.prototype.destroy=function(){this.a&&(this.a.parentElement.removeChild(this.a),this.a=null);this.o=this.b=null};k=nf.prototype;k.Ja=function(a,b){this.o=a;var c=b.mediaKeys;b.src=this.f;c=b.setMediaKeys(c);this.c&&(this.a=document.createElement("track"),this.a.src=this.c,b.appendChild(this.a),this.a.track.mode="showing");return c};k.V=function(){return Promise.resolve()};
k.Fa=function(){return[]};k.Ea=function(){return[]};k.Va=function(){return[]};k.Na=function(){return 5};k.Ma=function(){var a=new Mc;a.a=this.b;return[a]};k.Ba=function(){};k.Ga=function(){return!1};k.Xa=function(){return!1};k.Ya=function(){return!1};k.Da=function(a){this.a&&(this.a.track.mode=a?"showing":"disabled")};k.Za=function(){};k.Ca=function(){};k.ua=function(){};k.ra=function(){return[]};k.ka=function(){return!1};k.Wa=function(){return!1};}.bind(g,this))();
if (typeof(module)!="undefined"&&module.exports)module.exports=g.shaka;
else if (typeof(define)!="undefined")define(function(){return g.shaka});
else this.shaka=g.shaka;
})();

